<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.7bc9be3405e7931bfbf7.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.site-header{height:80px;background-color:#313d4b;border-bottom:4px solid darnken(#00c07f,30%)}.site-header a{color:#f9f8fd;text-decoration:none}.site-header .site-title{margin:0;font-size:24px;font-weight:lighter}.site-header .site-title .site-logo{display:inline-block;width:100%;height:28px;line-height:28px;font-weight:700;text-decoration:none}.site-header .site-navs ul{position:relative;list-style:none;padding-left:0;margin:0;font-size:16px}@media (max-width:767px){.icon-article,.icon-tag,.icon-video{width:32px;height:32px}}li.site-nav{margin-right:8px}li.site-nav a{padding:8px 4px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border:none;color:#fff}li.site-nav a:focus,li.site-nav a:hover{cursor:pointer}li.site-nav:last-child{margin-right:0}@media (max-width:767px){li.site-nav .nav-title{display:none}}.backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:9999;display:flex;align-items:center;justify-content:center;animation:backdropFadeIn .3s forwards}.backdrop.hide{animation:backdropFadeOut .3s forwards}.backdrop .modal{background:#fff;min-width:300px;box-shadow:0 4px -1px rgba(0,0,0,.9);animation:modalFadeIn .3s forwards}.backdrop .modal.hide{animation:modalFadeOut .3s forwards}@keyframes modalFadeIn{0%{opacity:0;transform:scale(.98)}50%{transform:scale(1.02)}to{opacity:1;transform:none}}@keyframes modalFadeOut{0%{opacity:1;transform:none}30%{opacity:.3;transform:scale(1.05)}to{opacity:0;transform:scale(1.2)}}@keyframes backdropFadeOut{0%{opacity:1%}to{opacity:0}}.category-select-modal ul{margin:0;padding:0;list-style:none}.category-select-modal ul li a{text-decoration:none;text-align:center;display:block;padding:16px 24px;color:#3d3d3f;border-bottom:1px solid #e7e9ee}.category-select-modal ul li a:focus,.category-select-modal ul li a:hover{background:rgba(0,0,0,.1)}.site-footer{background-color:#313d4b;text-align:center}.site-footer ul{list-style:none;padding:0}.site-footer ul li{display:inline-block}.site-footer .footer-desc{display:inline-block;max-width:500px;margin-left:auto;margin-right:auto;color:#d7d0f2}.site-footer .footer-navs{font-size:18px}.site-footer .footer-navs a{color:#f9f8fd;text-decoration:none}.site-footer .footer-copyright{font-size:14px;color:hsla(0,0%,100%,.7);display:inline-flex;align-items:center}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*{box-sizing:border-box}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;min-width:320px}a,body{color:#3d3d3f}.container{max-width:1024px;min-width:320px;margin-left:auto;margin-right:auto;padding:0 8px;height:100%}.flex{display:flex;align-items:center}.flex-1{flex:1 1;overflow:auto}.flex-0{flex:0 1;overflow:auto}.align-left{text-align:left}.align-right{text-align:right}.pt-0{padding-top:0}.pr-0{padding-right:0}.pb-0{padding-bottom:0}.pl-0,.px-0{padding-left:0}.px-0{padding-right:0}.py-0{padding-top:0;padding-bottom:0}.pt-1{padding-top:8px}.pr-1{padding-right:8px}.pb-1{padding-bottom:8px}.pl-1,.px-1{padding-left:8px}.px-1{padding-right:8px}.py-1{padding-top:8px;padding-bottom:8px}.pt-2{padding-top:16px}.pr-2{padding-right:16px}.pb-2{padding-bottom:16px}.pl-2,.px-2{padding-left:16px}.px-2{padding-right:16px}.py-2{padding-top:16px;padding-bottom:16px}.pt-3{padding-top:24px}.pr-3{padding-right:24px}.pb-3{padding-bottom:24px}.pl-3,.px-3{padding-left:24px}.px-3{padding-right:24px}.py-3{padding-top:24px;padding-bottom:24px}.pt-4{padding-top:32px}.pr-4{padding-right:32px}.pb-4{padding-bottom:32px}.pl-4,.px-4{padding-left:32px}.px-4{padding-right:32px}.py-4{padding-top:32px;padding-bottom:32px}.pt-5{padding-top:40px}.pr-5{padding-right:40px}.pb-5{padding-bottom:40px}.pl-5,.px-5{padding-left:40px}.px-5{padding-right:40px}.py-5{padding-top:40px;padding-bottom:40px}.pt-6{padding-top:48px}.pr-6{padding-right:48px}.pb-6{padding-bottom:48px}.pl-6,.px-6{padding-left:48px}.px-6{padding-right:48px}.py-6{padding-top:48px;padding-bottom:48px}.pt-7{padding-top:56px}.pr-7{padding-right:56px}.pb-7{padding-bottom:56px}.pl-7,.px-7{padding-left:56px}.px-7{padding-right:56px}.py-7{padding-top:56px;padding-bottom:56px}.pt-8{padding-top:64px}.pr-8{padding-right:64px}.pb-8{padding-bottom:64px}.pl-8,.px-8{padding-left:64px}.px-8{padding-right:64px}.py-8{padding-top:64px;padding-bottom:64px}.pt-9{padding-top:72px}.pr-9{padding-right:72px}.pb-9{padding-bottom:72px}.pl-9,.px-9{padding-left:72px}.px-9{padding-right:72px}.py-9{padding-top:72px;padding-bottom:72px}.pt-10{padding-top:80px}.pr-10{padding-right:80px}.pb-10{padding-bottom:80px}.pl-10,.px-10{padding-left:80px}.px-10{padding-right:80px}.py-10{padding-top:80px;padding-bottom:80px}.pt-11{padding-top:88px}.pr-11{padding-right:88px}.pb-11{padding-bottom:88px}.pl-11,.px-11{padding-left:88px}.px-11{padding-right:88px}.py-11{padding-top:88px;padding-bottom:88px}.pt-12{padding-top:96px}.pr-12{padding-right:96px}.pb-12{padding-bottom:96px}.pl-12,.px-12{padding-left:96px}.px-12{padding-right:96px}.py-12{padding-top:96px;padding-bottom:96px}.pt-13{padding-top:104px}.pr-13{padding-right:104px}.pb-13{padding-bottom:104px}.pl-13,.px-13{padding-left:104px}.px-13{padding-right:104px}.py-13{padding-top:104px;padding-bottom:104px}.pt-14{padding-top:112px}.pr-14{padding-right:112px}.pb-14{padding-bottom:112px}.pl-14,.px-14{padding-left:112px}.px-14{padding-right:112px}.py-14{padding-top:112px;padding-bottom:112px}.pt-15{padding-top:120px}.pr-15{padding-right:120px}.pb-15{padding-bottom:120px}.pl-15,.px-15{padding-left:120px}.px-15{padding-right:120px}.py-15{padding-top:120px;padding-bottom:120px}.pt-16{padding-top:128px}.pr-16{padding-right:128px}.pb-16{padding-bottom:128px}.pl-16,.px-16{padding-left:128px}.px-16{padding-right:128px}.py-16{padding-top:128px;padding-bottom:128px}.pt-17{padding-top:136px}.pr-17{padding-right:136px}.pb-17{padding-bottom:136px}.pl-17,.px-17{padding-left:136px}.px-17{padding-right:136px}.py-17{padding-top:136px;padding-bottom:136px}.pt-18{padding-top:144px}.pr-18{padding-right:144px}.pb-18{padding-bottom:144px}.pl-18,.px-18{padding-left:144px}.px-18{padding-right:144px}.py-18{padding-top:144px;padding-bottom:144px}.pt-19{padding-top:152px}.pr-19{padding-right:152px}.pb-19{padding-bottom:152px}.pl-19,.px-19{padding-left:152px}.px-19{padding-right:152px}.py-19{padding-top:152px;padding-bottom:152px}.pt-20{padding-top:160px}.pr-20{padding-right:160px}.pb-20{padding-bottom:160px}.pl-20,.px-20{padding-left:160px}.px-20{padding-right:160px}.py-20{padding-top:160px;padding-bottom:160px}.mt-0{margin-top:0}.mr-0{margin-right:0}.mb-0{margin-bottom:0}.ml-0,.mx-0{margin-left:0}.mx-0{margin-right:0}.my-0{margin-top:0;margin-bottom:0}.mt-1{margin-top:8px}.mr-1{margin-right:8px}.mb-1{margin-bottom:8px}.ml-1,.mx-1{margin-left:8px}.mx-1{margin-right:8px}.my-1{margin-top:8px;margin-bottom:8px}.mt-2{margin-top:16px}.mr-2{margin-right:16px}.mb-2{margin-bottom:16px}.ml-2,.mx-2{margin-left:16px}.mx-2{margin-right:16px}.my-2{margin-top:16px;margin-bottom:16px}.mt-3{margin-top:24px}.mr-3{margin-right:24px}.mb-3{margin-bottom:24px}.ml-3,.mx-3{margin-left:24px}.mx-3{margin-right:24px}.my-3{margin-top:24px;margin-bottom:24px}.mt-4{margin-top:32px}.mr-4{margin-right:32px}.mb-4{margin-bottom:32px}.ml-4,.mx-4{margin-left:32px}.mx-4{margin-right:32px}.my-4{margin-top:32px;margin-bottom:32px}.mt-5{margin-top:40px}.mr-5{margin-right:40px}.mb-5{margin-bottom:40px}.ml-5,.mx-5{margin-left:40px}.mx-5{margin-right:40px}.my-5{margin-top:40px;margin-bottom:40px}.mt-6{margin-top:48px}.mr-6{margin-right:48px}.mb-6{margin-bottom:48px}.ml-6,.mx-6{margin-left:48px}.mx-6{margin-right:48px}.my-6{margin-top:48px;margin-bottom:48px}.mt-7{margin-top:56px}.mr-7{margin-right:56px}.mb-7{margin-bottom:56px}.ml-7,.mx-7{margin-left:56px}.mx-7{margin-right:56px}.my-7{margin-top:56px;margin-bottom:56px}.mt-8{margin-top:64px}.mr-8{margin-right:64px}.mb-8{margin-bottom:64px}.ml-8,.mx-8{margin-left:64px}.mx-8{margin-right:64px}.my-8{margin-top:64px;margin-bottom:64px}.mt-9{margin-top:72px}.mr-9{margin-right:72px}.mb-9{margin-bottom:72px}.ml-9,.mx-9{margin-left:72px}.mx-9{margin-right:72px}.my-9{margin-top:72px;margin-bottom:72px}.mt-10{margin-top:80px}.mr-10{margin-right:80px}.mb-10{margin-bottom:80px}.ml-10,.mx-10{margin-left:80px}.mx-10{margin-right:80px}.my-10{margin-top:80px;margin-bottom:80px}.mt-11{margin-top:88px}.mr-11{margin-right:88px}.mb-11{margin-bottom:88px}.ml-11,.mx-11{margin-left:88px}.mx-11{margin-right:88px}.my-11{margin-top:88px;margin-bottom:88px}.mt-12{margin-top:96px}.mr-12{margin-right:96px}.mb-12{margin-bottom:96px}.ml-12,.mx-12{margin-left:96px}.mx-12{margin-right:96px}.my-12{margin-top:96px;margin-bottom:96px}.mt-13{margin-top:104px}.mr-13{margin-right:104px}.mb-13{margin-bottom:104px}.ml-13,.mx-13{margin-left:104px}.mx-13{margin-right:104px}.my-13{margin-top:104px;margin-bottom:104px}.mt-14{margin-top:112px}.mr-14{margin-right:112px}.mb-14{margin-bottom:112px}.ml-14,.mx-14{margin-left:112px}.mx-14{margin-right:112px}.my-14{margin-top:112px;margin-bottom:112px}.mt-15{margin-top:120px}.mr-15{margin-right:120px}.mb-15{margin-bottom:120px}.ml-15,.mx-15{margin-left:120px}.mx-15{margin-right:120px}.my-15{margin-top:120px;margin-bottom:120px}.mt-16{margin-top:128px}.mr-16{margin-right:128px}.mb-16{margin-bottom:128px}.ml-16,.mx-16{margin-left:128px}.mx-16{margin-right:128px}.my-16{margin-top:128px;margin-bottom:128px}.mt-17{margin-top:136px}.mr-17{margin-right:136px}.mb-17{margin-bottom:136px}.ml-17,.mx-17{margin-left:136px}.mx-17{margin-right:136px}.my-17{margin-top:136px;margin-bottom:136px}.mt-18{margin-top:144px}.mr-18{margin-right:144px}.mb-18{margin-bottom:144px}.ml-18,.mx-18{margin-left:144px}.mx-18{margin-right:144px}.my-18{margin-top:144px;margin-bottom:144px}.mt-19{margin-top:152px}.mr-19{margin-right:152px}.mb-19{margin-bottom:152px}.ml-19,.mx-19{margin-left:152px}.mx-19{margin-right:152px}.my-19{margin-top:152px;margin-bottom:152px}.mt-20{margin-top:160px}.mr-20{margin-right:160px}.mb-20{margin-bottom:160px}.ml-20,.mx-20{margin-left:160px}.mx-20{margin-right:160px}.my-20{margin-top:160px;margin-bottom:160px}.icon{display:inline-block;width:24px;height:24px;background-repeat:no-repeat;background-position-x:0;background-position-y:0;background-size:contain}.icon-1x{width:8px;height:8px}.icon-2x{width:16px;height:16px}.icon-3x{width:24px;height:24px}.icon-4x{width:32px;height:32px}.icon-5x{width:40px;height:40px}.icon-6x{width:48px;height:48px}.icon-7x{width:56px;height:56px}.icon-8x{width:64px;height:64px}.icon-9x{width:72px;height:72px}.icon-rss{background-image:url(/assets/imgs/icons/icon-rss.png)}.icon-github{background-image:url(/assets/imgs/icons/icon-github.png)}.icon-email{background-image:url(/assets/imgs/icons/icon-email.png)}.icon-article{background-image:url(/assets/imgs/icons/icon-article.png)}.icon-video{background-image:url(/assets/imgs/icons/icon-video.png)}.icon-tag{background-image:url(/assets/imgs/icons/icon-tag.png)}.btn{display:inline-block;padding:8px 16px;border-radius:4px;background-color:#f9f8fd;text-decoration:none;color:#3d3d3f;border:1px solid #3d3d3f}.btn-primary{color:#cd5554;border-color:#cd5554}.btn-primary:focus,.btn-primary:hover{background-color:#cd5554!important;color:#f9f8fd!important}.btn-secondary{color:#91684a;border-color:#91684a}.btn-secondary:focus,.btn-secondary:hover{background-color:#91684a!important;color:#f9f8fd!important}.btn-text{border:none;background:none;padding:0}.hidden{display:none}.post-meta .date{color:#a3a3a5}.gatsby-highlight{font-size:14px;line-height:1.5em}.category{max-width:800px}.post-list{list-style:none;padding:0}.post-list .post-item{text-decoration:none;display:block}.post-list .post-item .post-item-title{color:#cd5554}.post-list .post-item .post-summary{color:#3d3d3f;line-height:1.5em}@media (max-width:320px){.post-list .post-item .post-summary{display:none}}.home{padding-top:48px}@media (max-width:768px){.home{padding-top:0}}.home section{padding-bottom:96px}.home section .section-inner{max-width:800px}.home section .section-inner .section-title a{text-decoration:none}.tag-page .tag-item .tag-title-link{text-decoration:none;color:#cd5554;font-family:SF Mono,Menlo,Courier,Lucida Console,monospace}.tag-page .tag-item ul.post-list{padding-left:20px}.tag-page .tag-item ul.post-list li.post-item{margin-bottom:8px}.tag-page .tag-item ul.post-list li.post-item a.post-title{text-decoration:none;color:#3d3d3f}.tag-page .tag-item ul.post-list li.post-item a.post-title:focus,.tag-page .tag-item ul.post-list li.post-item a.post-title:hover{text-decoration:underline}.post-toc{border-left:2px solid #e7e9ee}.post-toc ul{padding-left:16px;list-style:none;margin:0}.post-toc ul li{margin-bottom:4px}.post-toc ul li p{margin:0}.post-toc ul li a{text-decoration:none;color:#a3a3a5;font-size:14px}.post-toc ul li a:focus,.post-toc ul li a:hover{color:#3d3d3f}.post-toc ul li a.active{color:#313d4b}.post-video a{display:block;position:relative;overflow:hidden}.post-video a img{width:100%;transition:all .3s ease}.post-video a:hover img{transform:scale(1.2)}.post-video a .post-video-overlay{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column}.post-video a .post-video-overlay .video-icon-wrapper{flex:1 1;display:flex;align-items:center;justify-content:center}.post-video a .post-video-overlay .video-icon-wrapper .video-icon{background:url(/assets/imgs/icons/icon-video-2.png) no-repeat;background-position:50%;background-size:50px 50px;opacity:.7;width:100px;height:100px;border-radius:50%;background-color:rgba(0,0,0,.3)}.post-video a .post-video-overlay .post-video-title{background:rgba(0,0,0,.3);color:#fff;padding:8px;text-align:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-size:14px}.series-nav{border-left:2px solid #e7e9ee}.series-nav .series-title{font-weight:700}.series-nav .series-title:before{content:"\C5F0\C7AC\BB3C";display:block;font-size:14px;color:#a3a3a5;font-weight:400}.series-nav .series-order .active{font-weight:700}.series-nav .next,.series-nav .prev{display:inline-block;flex:1 0 50%}.series-nav a{color:#91684a;text-decoration:none}.series-navigator{border-top:2px solid #e7e9ee;border-bottom:2px solid #e7e9ee}.series-navigator .flex{flex-flow:row}.series-navigator .controls{flex:0 0 100px;text-align:right}.series-navigator .controls a{text-decoration:none}.series-navigator .series-title{margin-top:8px}.series-navigator .series-title:before{content:"\C774   \C5F0\C7AC\BB3C   \B354\BCF4\AE30";display:block;font-size:14px;color:#a3a3a5;font-weight:400}.series-navigator .post-list{line-height:1.5em}.series-navigator .post-list a{display:inline-block;width:100%;text-decoration:none}.series-navigator .post-list a:focus,.series-navigator .post-list a:hover{text-decoration:underline}.series-navigator .post-list li{list-style:circle}.series-navigator .post-list li.active{list-style:unset;font-weight:700}.post{padding-top:160px}@media (max-width:768px){.post{padding-top:80px}}@media (max-width:320px){.post{padding-top:40px}}.post>.flex{align-items:flex-start}.post>.flex .post-aside{order:1}.post>.flex .post-container{order:0}.post .post-aside{flex:0 0 250px;position:-webkit-sticky;position:sticky;max-height:100vh;overflow-y:scroll;top:8px;margin-left:32px;padding-bottom:8px}@media (max-width:1023px){.post .post-aside{display:none}}.post .footer-container,.post .post-container{max-width:800px;margin-left:auto;margin-right:auto}.post .post-container{overflow-x:hidden}.post .post-header .post-title{color:#3d3d3f;font-size:42px}.post .post-header .post-meta .date{color:#a3a3a5}.post .post-content{font-size:18px;line-height:1.5em;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.post .post-content h1{font-size:200%;padding-top:20px}.post .post-content h2{font-size:180%;padding-top:18px}.post .post-content h3{font-size:160%;padding-top:16px}.post .post-content h4{font-size:140%;padding-top:14px}.post .post-content h5{font-size:120%;padding-top:12px}.post .post-content h1,.post .post-content h2,.post .post-content h3,.post .post-content h4,.post .post-content h5,.post .post-content h6{color:#cd5554;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;line-height:1em}.post .post-content img{border-radius:4px;display:block;margin:16px auto;max-width:93%;transition:transform .3s ease}.post .post-content img:hover{transform:scale(1.03)}.post .post-content blockquote{color:#6f6f73;position:relative}.post .post-content blockquote:before{content:"\201C";position:absolute;left:-24px;font-size:40px;color:#d6d6d8}.post .post-content .highlight{border-radius:4px;overflow-x:scroll}.post .post-content pre.highlight{padding:16px 24px;margin:0}.post .social-share-btns{align-items:flex-start;min-height:50px;box-sizing:content-box;padding-top:64px}</style><meta name="generator" content="Gatsby 2.23.12"/><title data-react-helmet="true">NodeJS에서 가장 많이 사용하는 테스트 프레임웍, Mocha | 김정환 블로그</title><meta data-react-helmet="true" name="description" content="주로 웹 기술에 대해 이야기 합니다"/><meta data-react-helmet="true" property="og:title" content="NodeJS에서 가장 많이 사용하는 테스트 프레임웍, Mocha"/><meta data-react-helmet="true" property="og:description" content="주로 웹 기술에 대해 이야기 합니다"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="김정환"/><meta data-react-helmet="true" name="twitter:title" content="NodeJS에서 가장 많이 사용하는 테스트 프레임웍, Mocha"/><meta data-react-helmet="true" name="twitter:description" content="주로 웹 기술에 대해 이야기 합니다"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e086d9fa26f0982bdea4aba2cd6f0c94"/><link as="script" rel="preload" href="/webpack-runtime-ce4be6f530f27c0f2791.js"/><link as="script" rel="preload" href="/framework-f600a0dcdbbe2ab3be17.js"/><link as="script" rel="preload" href="/app-7e7fd85447226af9207b.js"/><link as="script" rel="preload" href="/styles-89fd2ae28bdf06750a71.js"/><link as="script" rel="preload" href="/commons-a0a7d383b72c92281b17.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-index-tsx-c9526f1df2fcd6ef9a12.js"/><link as="fetch" rel="preload" href="/page-data/mocha/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="site-header"><div class="flex container"><h1 class="flex-1 site-title"><a class="site-logo" href="/">김정환 블로그</a></h1><nav class="site-navs"><ul class="flex ml-1"><li class="site-nav"><a class="flex" href="/mocha/#"><i class="icon icon-3x icon-article"></i><span class="nav-title">POSTS</span></a></li><li class="site-nav"><a class="flex" href="/#videos"><i class="icon icon-3x icon-video"></i><span class="nav-title">VIDEOS</span></a></li><li class="site-nav"><a class="flex" href="/tags/"><i class="icon icon-3x icon-tag"></i><span class="nav-title">TAGS</span></a></li></ul></nav></div></header><main><article id="post" class="post container" itemscope="" itemType="http://schema.org/BlogPosting"><div class="flex"><aside class="post-aside"><div class="post-toc"><ul>
<li><a href="#%EC%84%A4%EC%B9%98">설치</a></li>
<li><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C">테스트 코드</a></li>
<li><a href="#%ED%9B%84%EC%BB%A4">후커</a></li>
<li><a href="#exclusive">Exclusive</a></li>
<li><a href="#%EB%B9%84%EB%8F%99%EA%B8%B0">비동기</a></li>
</ul></div><div class="post-video"><a id="post-video" href="https://www.inflearn.com/course/테스트주도개발-tdd-nodejs-api"><img src="https://cdn.inflearn.com/wp-content/uploads/nodetdd.png"/><div class="post-video-overlay"><div class="video-icon-wrapper"><div class="video-icon"></div></div><div class="post-video-title">테스트주도개발(TDD)로 만드는 NodeJS API 서버<!-- --> »</div></div></a></div></aside><main class="post-container flex-1"><header class="mb-7 post-header"><h1 class="mt-0 mb-1 post-title" itemProp="name headline">NodeJS에서 가장 많이 사용하는 테스트 프레임웍, Mocha</h1><div class="post-meta"><time class="date" itemProp="datePublished" dateTime="2016년 01월 05일">2016년 01월 05일</time></div></header><div class="post-content" itemProp="articleBody"><p>서버와 웹프론트를 개발하면서 테스트는 항상 아쉽다. 프로젝트 초기에는 TDD 방법론으로 개발을 시작한다.</p>
<ol>
<li>실패하는 테스트 유닛을 만든다.</li>
<li>함수 로직을 만든다.</li>
<li>테스트에 성공한다.</li>
</ol>
<p>각 기능을 테스트 가능한 단위로 쪼개어 개발하는 과정 자체에 매력을 느낀다. 아마도 테스트 유닛을 통과하기만 하면 된다는 심리적 안정감도 선호에 영향을 주는 것 같다. 테스트 없이 개발하면 그물망 없는 막타워를 뛰어 내리는 심정이다. 코드 한 줄 한 줄이 부담스럽다.</p>
<p>그러나 요구사항이 수시로 변경되고 프로젝트 일정이 눈에 보이기 시작하면 테스트 코드 없이 바로 로직 구현을 하는 경우가 태반이다. 물론 신속히 개발할 수 있지만 나중에 유지보수 때 문제가 발생한다. 유지보수라고 하지만 새로운 기능을 요구할 때도 있다. 기존 로직에 영향을 주지 않고 코드를 작성해야 하는데 테스트 코드없이 구현하다보면 사이드 이펙트가 여기 저기서 터진다. 결국엔 유지보수 기간 중에 기존 코드에 대한 테스트 코드를 다시 작성하는 사태가 벌어진다. 일이 겁나 많아 진다.</p>
<p>NodeJS로 서버를 개발하면서 <a href="https://mochajs.org/">Mocha</a>는 가장 많이 애용하는 테스트 툴이다. 노드의 인기가 한참인 지금에서야 포스팅을 작성한다는게 늦은 것 같기도 하다. 그러나 정리하는 차원으로 Mocha 사용법에 대해 알아보자.</p>
<p><img src="/assets/imgs/2016/mocha1.png"></p>
<h2 id="설치" style="position:relative;"><a href="#%EC%84%A4%EC%B9%98" aria-label="설치 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>설치</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ npm install mocha --save-dev</code></pre></div>
<p><code class="language-text">package.json</code>에 스크립트를 추가해 두면 편리하다. 테스트 코드는 <code class="language-text">.spec.js</code> 파일로 작성하고 이 파일들에 대해 감시 옵션(<code class="language-text">-w</code>)을 추가해서 실행한다. 파일이 변경될 때마다 자동으로 테스트 러너가 실행될 것이다.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"node_modules/.bin/mocha $(find ./ -name '*.js') --recursive -w"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<h2 id="테스트-코드" style="position:relative;"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C" aria-label="테스트 코드 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테스트 코드</h2>
<p><code class="language-text">describe()</code>으로 테스트 suite을 만들고 그 안에 <code class="language-text">it()</code>으로 테스트 코드를 작성한다. <code class="language-text">descirbe()</code>은 중첩해서 사용할 수 있다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be ok'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>테스트는 물론 실패한다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Test suite
  1) should be ok

0 passing (1ms)
1 failing

1) Test suite should be ok:

    AssertionError: true == false
    + expected - actual

    -true
    +false</code></pre></div>
<h2 id="후커" style="position:relative;"><a href="#%ED%9B%84%EC%BB%A4" aria-label="후커 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>후커</h2>
<p>테스트 코드 전/후에 후커를 실행할 수 있다. <code class="language-text">before()/after()</code>는 테스트 suite 시작 전/후 한 번씩 실행된다. <code class="language-text">beforeEach()/afterEach()</code>는 테스트 suite 안에 정의한 모든 테스트 코드 실행 전/후마다 실행된다. 테스트에 필요한 자료를 데이터베이스에 입력하거나 삭제하는 등 테스트 코드 실행 전/후에 실행할 로직 작성시 사용한다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr<span class="token punctuation">;</span>

  <span class="token function">before</span><span class="token punctuation">(</span><span class="token string">'Create the array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">after</span><span class="token punctuation">(</span><span class="token string">'Destory the array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be ok'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>후커 사용시 동작에 유념할 필요가 있다. before()는 각 테스트 슈트(describe)와 테스트 케이스(it)마다 한번씩 호출되는 반면 beforeEach()는 각 테스트 케이스마대 매번 실행되는 점이 다르다. 아래 코드를 보고 결과를 한번 예측해 보자.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'suite1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">before</span><span class="token punctuation">(</span><span class="token string">'before1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token string">'beforeEach1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeEach1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3, 5</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'suite2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">before</span><span class="token punctuation">(</span><span class="token string">'before2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token string">'beforeEach2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeEach2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, 6</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>결과는 주석에서 실행순서를 달아 놓았지만 아래와 같다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">suite1
  before1
  suite2
    before2
    beforeEach1
    beforeEach2
    test1
      ✓ test1
    beforeEach1
    beforeEach2
    test2
      ✓ test2</code></pre></div>
<h2 id="exclusive" style="position:relative;"><a href="#exclusive" aria-label="exclusive permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exclusive</h2>
<p>테스트 코드를 작성한만큼 실행시간이 길어지는 것은 당연하다. 모든 테스트를 구동하지 않고 하나의 테스트 유닛만 실행하고 싶은 경우 각 함수에 <code class="language-text">only()</code> 메써드를 사용하면 된다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 오직 이 테스트만 수행됨</span>
  describe<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'Only this test suite will be run'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">only()</code> 대신 <code class="language-text">skip()</code> 메서드를 사용하면 해당 테스트 suite만 실행하지 않고 넘어간다.</p>
<h2 id="비동기" style="position:relative;"><a href="#%EB%B9%84%EB%8F%99%EA%B8%B0" aria-label="비동기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>비동기</h2>
<p>자바스크립에는 비동기 코드가 많다. 이를 테스트하기 위해 <code class="language-text">done()</code> 함수를 파라메터로 넘겨 사용한다. 아래는 1초 후에 동작하는 비동기 코드를 테스트한 경우다. assert한 뒤 파라메터로 넘어온 <code class="language-text">done()</code> 콜백함수를 실행하면 테스트가 종료된다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be ok'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 비동기 테스트 종료</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>모카는 기본적으로 2초 내로 테스트를 완료하도록 한다. 만약 이를 초과하면 아래와 같은 에러 메시지를 출력할 것이다.</p>
<blockquote>
<p>Error: timeout of 2000ms exceeded. Ensure the done() callback is being called in this test.</p>
</blockquote>
<p><code class="language-text">timeout()</code> 메소드는 테스트 수행 시간을 설정하는데 사용한다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 이 테스트 suite을 5초 내로 수행함</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be ok'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 3초후 비동기 코드가 실행됨</span>
      assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><div class="mt-7"><span class="post-tags"><a class="btn btn-secondary" data-tag-name="nodejs" href="/tags/#nodejs">#<!-- -->nodejs</a> <a class="btn btn-secondary" data-tag-name="test" href="/tags/#test">#<!-- -->test</a> </span></div><div class="flex social-share-btns"><div class="mr-1"><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button></div><div class="mr-1"><button aria-label="facebook" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button></div><div class="mr-1"><button aria-label="pocket" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#EF3F56"></circle><path d="M41.084 29.065l-7.528 7.882a2.104 2.104 0 0 1-1.521.666 2.106 2.106 0 0 1-1.522-.666l-7.528-7.882c-.876-.914-.902-2.43-.065-3.384.84-.955 2.228-.987 3.1-.072l6.015 6.286 6.022-6.286c.88-.918 2.263-.883 3.102.071.841.938.82 2.465-.06 3.383l-.015.002zm6.777-10.976C47.463 16.84 46.361 16 45.14 16H18.905c-1.2 0-2.289.82-2.716 2.044-.125.363-.189.743-.189 1.125v10.539l.112 2.096c.464 4.766 2.73 8.933 6.243 11.838.06.053.125.102.19.153l.04.033c1.882 1.499 3.986 2.514 6.259 3.014a14.662 14.662 0 0 0 6.13.052c.118-.042.235-.065.353-.087.03 0 .065-.022.098-.042a15.395 15.395 0 0 0 6.011-2.945l.039-.045.18-.153c3.502-2.902 5.765-7.072 6.248-11.852L48 29.674v-10.52c0-.366-.041-.728-.161-1.08l.022.015z" fill="white"></path></svg></button></div></div></main></div><footer class="post-footer footer-container py-10 mt-8"><div id="disqus_thread"></div></footer></article></main><footer class="site-footer mb-0 py-5"><ul class="footer-navs  mb-4"><li class="mr-3"><a href="/category/">POSTS</a></li><li class="mr-3"><a href="/#videos">VIDEOS</a></li><li><a href="/tags/">TAGS</a></li></ul><ul class="mb-10"><li class="mr-2"><a class="icon icon-5x icon-rss" title="rss" href="/feed.xml"></a></li><li class="mr-2"><a class="icon icon-5x icon-email" href="mailto:ej88ej@gmail.com" title="email"></a></li><li><a href="https://github.com/jeonghwan-kim" class="icon icon-5x icon-github" title="github"></a></li></ul><div class="footer-copyright"><div class="mr-1">© <!-- -->김정환<!-- --> <!-- -->2020</div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/mocha/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-7e7fd85447226af9207b.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-5ddcf91263ffd8eeacf3.js"],"component---src-pages-category-dev-tsx":["/component---src-pages-category-dev-tsx-6634212b9390a2b3c6f6.js"],"component---src-pages-category-index-tsx":["/component---src-pages-category-index-tsx-c56fee75faaf89a0586f.js"],"component---src-pages-category-series-tsx":["/component---src-pages-category-series-tsx-97974f1913329643941b.js"],"component---src-pages-category-think-tsx":["/component---src-pages-category-think-tsx-ee9a2f0e88fcba46e57f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-9494a8ff990a959207d8.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-a9b4e14db30ca6f5a93f.js"],"component---src-templates-blog-post-index-tsx":["/component---src-templates-blog-post-index-tsx-c9526f1df2fcd6ef9a12.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-index-tsx-c9526f1df2fcd6ef9a12.js" async=""></script><script src="/commons-a0a7d383b72c92281b17.js" async=""></script><script src="/styles-89fd2ae28bdf06750a71.js" async=""></script><script src="/app-7e7fd85447226af9207b.js" async=""></script><script src="/framework-f600a0dcdbbe2ab3be17.js" async=""></script><script src="/webpack-runtime-ce4be6f530f27c0f2791.js" async=""></script></body></html>