---
slug: "/2025/01/20/code-review"
date: 2025-01-20
title: "제목"
layout: post
tags:
---

코드리뷰를 시작한지 일 년이 지났다. 그 전에는 리뷰할 기회가 그렇게 많지 않았다. 대부분 혼자 개발했기 때문에 리뷰라는 게 불가능한 상황이었다. 팀원이 몇명 있기 했지만 다른 직군이고... 재작년부터는 프론트엔드 개발자 6분과 함께 같은 제품을 개발해 오고 있는데 이것이 코드 리뷰의 기회였다.

사실 코드 리뷰에 대해서 무심했다. 왜냐하면 그렇게 일해 오지 않았기 때문이다. 내가 이 팀에 새로 합류하게 되면서 기존에 있던 코드 리뷰 문화에 적응해야했던 상황이다. 처음부터 잘 할수 있으랴? 여러 시행착오를 겪고 나도 학습하면서 익히는 과정이 지난 1년 남짓이었다.

이제는 코드리뷰가 일상화되었고 매일 일정 시간은 동료의 코드를 리뷰한다. 동룔로부터 리뷰받은 코드를 수정하고 다시 코드리뷰를 요청하기도한다. 매일 어떤 리뷰가 도착했을까? 어떤 코드를 리뷰할 수 있을까? 하는 일종의 기대 심리을 가지고 출근한다.

그동안 익혔던 코드리뷰라는 녀석의 효과를 몇 꼭지로 정리해 본다.

# 컨벤션 협의

7명이서 개발하는 프로젝트에는 다양한 코딩 스타일이 있다. 혼자서 개발한다면야 문제되지 않지만 다른 사람이 보는 코드를 작성하는 환경에서는 들여쓰기나 변수이름 정하는 방식 같은 코딩 컴벤션이 중요하다. 다른 사람의 의도를 읽는데 형식이 다양하다면 그만큼 의도를 읽는데 시간이 걸리기 때문이다.

이러한 컴벤션은 하루아침에 정해지는 게 아니다. 물론 그동안 나는 에어비앤비나 자바스크립트 표준 컨벤션을 사용해 취향없이 누군가 정해놓은 규칙을 따랐다. 하지만 오래된 제품인 만큼 그동안 지나간 동료들이 겪은 시행착오가 린트 룰에 녹아져 있다. 컨벤션을 위한 회의도 있었다. 누군가 의견을 발의해 정했던 흔적이다.

코드리뷰를 하면서 '리액트 리스트 렌더링에 key에 인덱스를 사용하는 게 안전할까?'라는 의문이 들지도 모른다. 리뷰어는 문서에 맞게 id를 사용하길 기대했을 것이다. 어쩌면 작성자는 정적인 값이라서 인덱스를 사용했던 것일 수도 있다. 이러한 질문이 더이상 나오지 않도로록 코드 리뷰를 통해 논의할 수 있다. 그 자리에서 정하지 못하는 경우 '팀 단위로 확장해서' 논의할 수 있다.

# 경험과 노하우 공유

크로스브라우징 이슈는 예전처럼 많이 경험하지 않는다. 하지만 여전히 구버전 브라우져나 모바일, 나아가 웹뷰 환경까지 고려한다면 크로스브라우징은 잠재적인 문제가 될 소지가 있다. 이제 막 합류한 팀원의 코드에서 크로스브라우징 이슈가 발생할만한 부분을 발견해 코드리뷰에서 피드백할 수 있다. 이런 것은 자칫하면 QA에서 잡히거나 그렇지 못한경우 유저에 의해 발견될수도 있다. 하지만 경험있는 동료의 코드리뷰가 선행된다면 이러한 문제를 미리 해결 할 수 있다.

또한 코드 베이스가 커진다면 이미 있는 코드인데 찾지 못하고 계속 중복 코드를 만들어 낼 수 있다. 오랬동안 코드를 만져온 동료가 리뷰한다면 'xx님 이 코드를 만들어 주셨는데 이미 있는 이 모듈과 기능이 겹치는 것 같아요. ' 정도만 리뷰해도 좋다. 작성자는 감사한 마음으로 미리 준비된 모듈을 가져다 사용할 것이다.

# 라이브러리 사용법 학습

lodash를 사용하긴 하지만 안써본 함수가 많다. 다른 동료의 코드를 리뷰하다보면 다양한 함수를 사용한다. flow, xxx, xxx, xxx. 다시금 lodash 문서를 찾고 '아 이렇 함수구나' 하고 배운다. 그러고서는 다음엔 내가 코딩할 때 라이브러리 함수를 사용한다.

비교적 늦게 리액트 쿼리를 도입했다. 도입하는 과정에서 다른 후보와 비교하는 과정에서 팀원의 의견을 받기 위해 코드리뷰를 활용하셨다. 특정 지면을 리액트 쿼리를 활용한 1안, SWR을 활용한 2안. 이렇게 두 가지 코드 변경사항을 만들어 리뷰를 요청주셨다. 우리는 각 안에 대해서 각자 생각하고 느낀점을 리뷰 형태로 달았다. 작성자는 의견을 취합해 리액트 쿼리를 도입했던 사례도 있다.

신규 라이브러리인 만큼 문서의 일부분만 보고 사용하기 쉬운데, 이게 또 리뷰를 통한 학습 효과가 있다. 이미 리액트 쿼리를 경험한 동료가 다른 코드를 리뷰하면서 적극적으로 경험기를 알려주는 것은 소중한 자산이다. 쿼리키를 관리하는 방법, 옵션 객체의 의미와 효과. 이런 것은 문서만으로는 한계이며 베스트 프랙티를 찾는데 한계이면 찾았다해도 확신하기 어렵다. 하지만 이미 경험했던 동료의 피드백은 확실한 결과이며 확신을 준다.

# 코드리뷰를 대하는 자세

코드리뷰는 불화를 낳는다는 우려섞인 글을 봤다. 리뷰를 하다보니 정말 그랬다. 리뷰어의 질문이 지적에 마음이 상하고 일하지 않는 순간에도 신경쓰이니 말이다.

그렇다면 나도 누군가의 코드에대해 말할 때는 좀 상냥해질 필요가 있다. 너무 짧지 않게, 너무 직설적이지 않게 최대한 상냥하게 내 의견을 얘기할 필요가 있다. 토론 경험이 많지 않은 나에게는 더욱 그렇다. 난 내 생각을 얘기 했을 뿐인데 상대방은 화를 내는 경우도 있지 않았는가? 하물려 얼굴 보지 않고 말하는 온라인에서는 더욱 상냥해질 필요가 있다.

하편 다른 사람의 리뷰를 받을 때는 좀 덤덤해질 필요가 있다. 왜냐하면 내가 리뷰어로서의 본심이 그분에게도 있기 때문이다. 단지 표현이 서툴고 xx할 뿐이기 때문이다. 그리고 원래 그사람 스타일이 그래 라고 가볍에 넘겨버릴 여유도 필요하다. 중요한 것은 어떤 형태로든 내가 만든 코드에 대한 의견을 얻는 것이기 때문이다. 아무리 내가 잘못했어도 그것을 지적하는 소리는 듣기 거북하다. 마치 감기약이 쓴것 처럼 말이다. 이걸 받아들이고 소화해야만 나는 더 나은 코드를 만들수 있고 팀에 기여할 수 있을 것이다.

# 결론

올해도 어던 코드리뷰 문화를 경험할지 기대 된다. 이제 팀에도 막낸가 3년차라서 어느덧 경험있는 분들로 채워졌다. 각자의 경험과 노하우로 의견을 주고 받는다면 좀더 의미있고 재미있는 개발 문화가 만들어 졌으면 좋겠다.
