{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/2023/06/24/lecture-react-season2-part4-ch1","result":{"data":{"site":{"siteMetadata":{"title":"김정환 블로그","url":"https://jeonghwan-kim.github.io"}},"markdownRemark":{"id":"e05545e0-c141-579d-bd55-aefea33c1a1f","html":"<p>3편에서 학습한 기본 훅을 이용해 어플리케이션을 함수 컴포넌트로 다시 만들었다. 일부 남은 것이 있는데 레프 객체를 사용하는 부분이다.</p>\n<ul>\n<li>Dialog: 레프 객체로 앨리먼트에 접근, 버튼 포커스</li>\n<li>OrderForm: 제출 이벤트 처리 시 레프 객체로 입력 값 조회</li>\n</ul>\n<h1 id=\"useref-직접-만들기\" style=\"position:relative;\"><a href=\"#useref-%EC%A7%81%EC%A0%91-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"useref 직접 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useRef 직접 만들기</h1>\n<p>함수 컴포넌트에서 레프 객체를 사용할 방법을 궁리해 보자. 컴포넌트가 렌더링되는 동안 계속 유지되어야할 값이라는 점에서 상태와 비슷하다. 상태를 변경하면 컴포넌트가 리랜더 되지만 레프 객체는 그렇지 않다는 점이 다르다.</p>\n<p>MyReact에 useRef 훅을 구현해 보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> MyReact <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyReact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> memorizedStates <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> isInitialized <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">let</span> cursor <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">function</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isInitialized<span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      memorizedStates<span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">current</span><span class=\"token operator\">:</span> initialValue <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> memorizedState <span class=\"token operator\">=</span> memorizedStates<span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">    cursor <span class=\"token operator\">=</span> cursor <span class=\"token operator\">+</span> <span class=\"token number\">1</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> memorizedState</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    useRef<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>레프 객체를 저장하기 위해 memorizedStates 변수를 만들었다. 여러 훅을 지원하기 위해 배열을 사용했다. 레프 객체 초기화 여부를 기록하기 위한 배열 isInitialized도 있다. 호출 순서에 따라 이 두 배열의 값을 가리킬 커서도 0으로 초기화했다.</p>\n<p>이어 useRef 훅을 정의했다. 초기값을 전달할 수 있도록 인자로 열어 두었다. 훅을 처음 호출할 경우 current에 이 값을 담은 객체를 생성해 내부 상태에 저장해 두었다.</p>\n<p>다음 훅 호출부터는 기억해둔 값을 반환할 것이다.</p>\n<p>훅을 테스트 해 보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UseRefTest</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  MyReact<span class=\"token punctuation\">.</span><span class=\"token function\">resetCursor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state1<span class=\"token punctuation\">,</span> setState1<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> ref1 <span class=\"token operator\">=</span> MyReact<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> ref2 <span class=\"token operator\">=</span> MyReact<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state1 <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> ref1<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> ref1<span class=\"token punctuation\">.</span>current <span class=\"token operator\">+</span> <span class=\"token number\">1</span></span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setState1</span><span class=\"token punctuation\">(</span>state1 <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"input 값:\"</span><span class=\"token punctuation\">,</span> ref2<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">state1 증가 (state1: </span><span class=\"token punctuation\">{</span>state1<span class=\"token punctuation\">}</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">ref1(state1이 2보다 크면 증가): </span><span class=\"token punctuation\">{</span>ref1<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref2<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">ref2로 인풋 값 조회</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>리랜더링를 발생시키려고 상태 state1을 만들었다. 레프 객체가 렌더링과 무관하게 값을 유지하는지 확인하려는 목적이다.</p>\n<p>이어서 레프 객체 ref1, re2를 만들었다. MyReact 내부 변수에 [{current: 1}, {current: \"a\"}] 값이 저장될 것이다.</p>\n<p>상태 state1 > 2 조건이면 클릭할 때마다 ref1 값도 올리는 로직을 넣었다. 레프 객체의 값을 변경하고 유지되는지 확인하려는 목적이다.</p>\n<p>증가 버튼을 클릭하면 상태 state1을 변경하고 컴포넌트를 다시 실행할 것이다. 렌더링 할 때마다 ref1 값이 어떻게 바뀌는지 아래 표시했다.</p>\n<p>ref2는 인풋 앨리먼트에게 전달했다. 조회 버튼을 클릭하면 ref2를 통해 인풋 앨리먼트에 접근해 입력 값을 기록할 것이다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 726px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a301c6dbcd841112a0c0e41015ea5ca4/a2510/ref-works.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.6923076923076925%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB26AB/8QAFhAAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEBAAEFAhV//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABPyFf/9oADAMBAAIAAwAAABBzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAMAAwAAAAAAAAAAAAAAAAABETFBUf/aAAgBAQABPxDKtQi4Q//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ref객체가 동작한다.\"\n        title=\"ref객체가 동작한다.\"\n        src=\"/static/a301c6dbcd841112a0c0e41015ea5ca4/fee13/ref-works.jpg\"\n        srcset=\"/static/a301c6dbcd841112a0c0e41015ea5ca4/5fc5d/ref-works.jpg 182w,\n/static/a301c6dbcd841112a0c0e41015ea5ca4/accec/ref-works.jpg 363w,\n/static/a301c6dbcd841112a0c0e41015ea5ca4/fee13/ref-works.jpg 726w,\n/static/a301c6dbcd841112a0c0e41015ea5ca4/a2510/ref-works.jpg 1000w\"\n        sizes=\"(max-width: 726px) 100vw, 726px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">ref객체가 동작한다.</figcaption>\n  </figure></p>\n<h1 id=\"useref-활용\" style=\"position:relative;\"><a href=\"#useref-%ED%99%9C%EC%9A%A9\" aria-label=\"useref 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useRef 활용</h1>\n<p>간단하게 레프 훅을 구현했다. Dialog, OrderForm을 함수 컴포넌트로 바꾸고 리액트의 useRef를 사용하자.</p>\n<p>src/components/Dialog.jsx</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Dialog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> header<span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">,</span> footer <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> footerRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span>\n<span class=\"gatsby-highlight-code-line\">  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>footerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n    <span class=\"token keyword\">const</span> buttons <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>footerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"button\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>buttons<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n    <span class=\"token keyword\">const</span> activeButton <span class=\"token operator\">=</span> buttons<span class=\"token punctuation\">[</span>buttons<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    activeButton<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>footerRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>header <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>header<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>footer <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>footerRef<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>footer<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>레프 객체를 멤버 변수로 사용했던 클래스 컴포넌트를 함수 컴포넌트로 바꾸면서 레프 훅을 사용했다. 훅 반환 값을 내부 변수 footerRef에 담았다.</p>\n<p>이 값을 footer 앨리먼트에 전달했는데 렌더 후 돔에 마운트 되면 footerRef.current에 엘리먼트를 가리키는 값이 할당될 것이다.</p>\n<p>다이얼로그가 렌더되면 이 값에 의존하는 부수효과가 동작한다. footer 앨리먼트 하위에 있는 button 찾아 마지막 앨리먼트에 포거스할 것이다.</p>\n<p>pages/CartPage/OrderForm.jsx</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">OrderForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> onSubmit <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> formRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getInputValueByName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> inputElement <span class=\"token operator\">=</span> formRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">.</span><span class=\"token function\">namedItem</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>inputElement<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> inputElement<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> deliveryAddress <span class=\"token operator\">=</span> <span class=\"token function\">getInputValueByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"deliveryAddress\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> deliveryContact <span class=\"token operator\">=</span> <span class=\"token function\">getInputValueByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"deliveryContact\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> paymentMethod <span class=\"token operator\">=</span> <span class=\"token function\">getInputValueByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"paymentMethod\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> messageToShop <span class=\"token operator\">=</span> <span class=\"token function\">getInputValueByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"messageToShop\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> messageToRider <span class=\"token operator\">=</span> <span class=\"token function\">getInputValueByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"messageToRider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      deliveryAddress<span class=\"token punctuation\">,</span>\n      deliveryContact<span class=\"token punctuation\">,</span>\n      paymentMethod<span class=\"token punctuation\">,</span>\n      messageToRider<span class=\"token punctuation\">,</span>\n      messageToShop<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n      <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>OrderForm<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>order-form<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>formRef<span class=\"token punctuation\">}</span></span></span>      <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span></code></pre></div>\n<p>form 앨리먼트를 가리킬 formRef 객체를 준비했다. 이 값을 ref 인자로 전달했다. 컴포넌트가 마운트되면 formRef.current에 form 앨리먼트를 가리키는 값이 할당될 것이다.</p>\n<p>비어 있던 getInputValueByName 함수에 내용을 채웠다. formRef를 통해 폼 앨리먼트에 접근할 수 있다. 폼 하위 필드 이름을 받으면 찾아서 값을 반환하는 함수다.</p>\n<h1 id=\"역할\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0\" aria-label=\"역할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할</h1>\n<p>클래스 컴포넌트에서 사용하는 createRef와 비슷하다. createRef는 컴포넌트 인스턴스 멤버 변수로 등록해 사용했다.</p>\n<p>함수 컴포넌트에서는 이러한 구조의 createRef 레프 객체 팩토리 함수를 사용할 수 없다. 함수가 호출될 때마다 새로운 레프 객체가 만들어질 것이기 때문이다. 함수가 여러 번 호출되더라도 지속되는 값을 제공해 주어야 한다. 상태 훅과 비슷한 구조다.</p>\n<p>MyReact 안에 레프 객체를 담을 클로져 공간을 확보하고 여기에 값을 관리했다. 함수형 컴포넌트가 여러 번 호출되더라도 처음 호출할 때에만 객체를 초기값으로 생성하고 이후에는 저장된 값을 제공한다. 이런 방식으로 함수 컴포넌트 안에서 레프 객체를 제공했다.</p>\n<p>--</p>\n<p>함수 컴포넌트에서 레프 객체를 사용할 수 있게 레프 훅을 직접 만들어 보았다. 컴퍼넌트가 살아있는 동안 유지되는 값인데 렌더링에 영향을 주지 않는 것이 특징이다. 상태 훅이나 메모 훅과 비슷한 특징이라서 비슷하게 구혔했는데 후자를 선택했다.</p>\n<p>실제 리액트의 것을 Dialog과 OrderForm에 활용했다. 클래스 컴포넌트에 멤버변수로 생성한 래프객체를 함수형컴포넌트의 훅으로 교체했다. 나머지는 클래스 컴포넌트의 것과 똑같다.</p>\n<p>이것으로 1, 2편에 클래스 컴포넌트로 만들었던 어플리케이션을 모두 훅으로 바꾸었다. 다음 장부터는 어플리케이션을 개선하면서 나머지 리액트 훅에 대해 알아보자.</p>\n<h1 id=\"중간-정리\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EA%B0%84-%EC%A0%95%EB%A6%AC\" aria-label=\"중간 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>중간 정리</h1>\n<p>직접 만들기</p>\n<ul>\n<li>함수 컴포넌트가 여러번 실행되더라도 지속되는 값이 필요</li>\n<li>MyReact 안에 레프 객체를 담을 클로져 공간 확보 (memorizedStates), 여기에 값을 관리</li>\n<li>상태 훅과 비슷하지만 리랜더링 하지 않는 것이 차이</li>\n</ul>\n<p>활용</p>\n<ul>\n<li>Dialog: 푸터 앨리먼트에 접근, 버튼 포커스</li>\n<li>OrderForm: 폼 앨리먼트에 접근, 입력 값 조회</li>\n</ul>\n<p>역할</p>\n<ul>\n<li>컴포넌트 리랜더링과 무관하게 지속할 수 있는 값을 제공</li>\n</ul>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"/2022/05/31/react-ref\">리액트 Ref | 김정환블로그</a></li>\n</ul>","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch1","date":"2023-06-24T00:04:01.000Z","title":"[리액트 2부] 4.1 레프 훅","tags":["react"],"series":"[리액트 2부] 고급주제와 훅","videoId":null,"featuredImage":null},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#useref-%EC%A7%81%EC%A0%91-%EB%A7%8C%EB%93%A4%EA%B8%B0\">useRef 직접 만들기</a></p>\n</li>\n<li>\n<p><a href=\"#useref-%ED%99%9C%EC%9A%A9\">useRef 활용</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%97%AD%ED%95%A0\">역할</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A4%91%EA%B0%84-%EC%A0%95%EB%A6%AC\">중간 정리</a></p>\n<ul>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>","excerpt":"3편에서 학습한 기본 훅을 이용해 어플리케이션을 함수 컴포넌트로 다시 만들었다. 일부 남은 것이 있는데 레프 객체를 사용하는 부분이다. Dialog: 레프 객체로 앨리먼트에 접근, 버튼 포커스 OrderForm: 제출 이벤트 처리 시 레프 객체로 입력 값 조회 useRef…"},"video":null,"allMarkdownRemark":{"nodes":[{"id":"26cea473-b849-5458-a9d9-f4d209feb09c","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1","date":"2023-06-24T00:01:00.000Z","title":"[리액트 2부] 1편 리액트로 사고하기","series":"[리액트 2부] 고급주제와 훅"}},{"id":"965bc8a6-05cd-57fe-86b9-f387ceeeaad5","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch1","date":"2023-06-24T00:01:01.000Z","title":"[리액트 2부] 1.1 준비","series":"[리액트 2부] 고급주제와 훅"}},{"id":"99ddfce1-8ced-50f6-babd-90a24bc9a83a","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch2","date":"2023-06-24T00:01:02.000Z","title":"[리액트 2부] 1.2 상품목록 화면","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ff33d693-550c-5a5b-b00e-868fd1b23605","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch3","date":"2023-06-24T00:01:03.000Z","title":"[리액트 2부] 1.3 주문내역 화면","series":"[리액트 2부] 고급주제와 훅"}},{"id":"24d1b4ee-cf51-5053-89d5-7742df2b3fdc","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch4","date":"2023-06-24T00:01:04.000Z","title":"[리액트 2부] 1.4 장바구니 화면","series":"[리액트 2부] 고급주제와 훅"}},{"id":"866e80fc-2630-56e4-bcc2-461148b08992","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch5","date":"2023-06-24T00:01:05.000Z","title":"[리액트 2부] 1편 최종정리","series":"[리액트 2부] 고급주제와 훅"}},{"id":"7a6b2398-7838-5384-be55-ed45372ff8df","frontmatter":{"slug":"/2023/06/24/lecture-react-season2","date":"2023-06-24T00:02:00.000Z","title":"[리액트 2부] 2편 고급주제","series":"[리액트 2부] 고급주제와 훅"}},{"id":"19d25ba7-081b-5c4a-aba0-7351b9515be4","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch1","date":"2023-06-24T00:02:01.000Z","title":"[리액트 2부] 2.1 컨택스트","series":"[리액트 2부] 고급주제와 훅"}},{"id":"1654d3fb-fc4a-5e7b-8bb5-7e319f2c1ed6","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch2","date":"2023-06-24T00:02:02.000Z","title":"[리액트 2부] 2.2 라우터 1","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ab54a047-235a-5869-962a-726ade8cae48","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch3","date":"2023-06-24T00:02:03.000Z","title":"[리액트 2부] 2.3 라우터 2","series":"[리액트 2부] 고급주제와 훅"}},{"id":"65588fc9-8650-5cdc-99db-e014fd3210bf","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch4","date":"2023-06-24T00:02:04.000Z","title":"[리액트 2부] 2.4 다이얼로그 1","series":"[리액트 2부] 고급주제와 훅"}},{"id":"86b82ddd-85dd-5c0b-be57-c9c75d55c91c","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch5","date":"2023-06-24T00:02:05.000Z","title":"[리액트 2부] 2.5 다이얼로그 2","series":"[리액트 2부] 고급주제와 훅"}},{"id":"3dae87b9-5213-5e1b-8bf4-8f9c33d078f1","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch6","date":"2023-06-24T00:02:06.000Z","title":"[리액트 2부] 2편 최종정리","series":"[리액트 2부] 고급주제와 훅"}},{"id":"c6b02bfa-8eda-53d1-94b5-5919a39f1729","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3","date":"2023-06-24T00:03:00.000Z","title":"[리액트 2부] 3편 기본훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"9849501f-8149-53c3-abf4-c90fcb8a7cc6","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch1","date":"2023-06-24T00:03:01.000Z","title":"[리액트 2부] 3.1 클래스/함수 컴포넌트","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ff7009cf-4735-5ba8-a69b-9d15e0e7fc9c","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch2","date":"2023-06-24T00:03:02.000Z","title":"[리액트 2부] 3.2 상태 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"c0a638eb-49ef-5029-862b-b3da9057ea54","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch3","date":"2023-06-24T00:03:03.000Z","title":"[리액트 2부] 3.3 부수효과 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"eda5fd51-312f-5566-8732-fd9a2d018809","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch4","date":"2023-06-24T00:03:04.000Z","title":"[리액트 2부] 3.4 훅 활용 1","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ab302da7-85be-5830-b43b-7128e639b18b","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch5","date":"2023-06-24T00:03:05.000Z","title":"[리액트 2부] 3.5 컨택스트 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"97df3a13-fb9d-5d44-8705-dd3b6f652276","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch6","date":"2023-06-24T00:03:06.000Z","title":"[리액트 2부] 3.6 훅 활용 2","series":"[리액트 2부] 고급주제와 훅"}},{"id":"8cef88e5-e8b8-5ec9-bd0d-83bbf2023434","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch7","date":"2023-06-24T00:03:07.000Z","title":"[리액트 2부] 3편 최종정리","series":"[리액트 2부] 고급주제와 훅"}},{"id":"1052426c-817f-5931-aa06-edbe98b7f1b5","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4","date":"2023-06-24T00:04:00.000Z","title":"[리액트 2부] 4편 추가훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"e05545e0-c141-579d-bd55-aefea33c1a1f","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch1","date":"2023-06-24T00:04:01.000Z","title":"[리액트 2부] 4.1 레프 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"952c8c46-d9b6-5f79-8ff1-3b238fb93d16","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch2","date":"2023-06-24T00:04:02.000Z","title":"[리액트 2부] 4.2 제어 폼","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ffc045bc-b200-5538-ae68-33c6ec071ed1","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch3","date":"2023-06-24T00:04:03.000Z","title":"[리액트 2부] 4.3 리듀서 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"5fc95eba-421d-56e7-9c99-f69374668822","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch4","date":"2023-06-24T00:04:04.000Z","title":"[리액트 2부] 4.4 메모이제이션 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"06918a66-dd3e-5eac-8f59-c9cad2d2ca83","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch5","date":"2023-06-24T00:04:05.000Z","title":"[리액트 2부] 4편 최종정리","series":"[리액트 2부] 고급주제와 훅"}}]}},"pageContext":{"slug":"/2023/06/24/lecture-react-season2-part4-ch1","date":"2023-06-24T00:04:01.000Z","series":"[리액트 2부] 고급주제와 훅","videoId":null,"previous":{"frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4","date":"2023-06-24T00:04:00.000Z","title":"[리액트 2부] 4편 추가훅","category":null,"series":"[리액트 2부] 고급주제와 훅","videoId":null}},"next":{"frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch2","date":"2023-06-24T00:04:02.000Z","title":"[리액트 2부] 4.2 제어 폼","category":null,"series":"[리액트 2부] 고급주제와 훅","videoId":null}}}},"staticQueryHashes":["2263867198"]}