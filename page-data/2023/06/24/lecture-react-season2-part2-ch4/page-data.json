{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/2023/06/24/lecture-react-season2-part2-ch4","result":{"data":{"site":{"siteMetadata":{"title":"김정환 블로그","url":"https://jeonghwan-kim.github.io"}},"markdownRemark":{"id":"360c5627-4b69-539e-b056-caffd631bee9","html":"<p>나머지 다이얼로그 관련 요구사항들이다.</p>\n<ul>\n<li>0.4 API 호출시 로딩 메세지를 다이얼로그로 표시한다. (다이얼로그)</li>\n<li>0.5 예외 처리용 메세지를 다이얼로그로 표시한다. (다이얼로그)</li>\n<li>2.7 결제하기 버튼을 클릭하면 사용자 확인을 받는다. (다이얼로그)</li>\n</ul>\n<p>지난 장에 이어 리액트 컨택스트와 고차 컴포넌트 패턴을 사용하겠다.</p>\n<h1 id=\"dialog\" style=\"position:relative;\"><a href=\"#dialog\" aria-label=\"dialog permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dialog</h1>\n<p>먼저 ui 부터 만들자. 미리 준비한 스타일을 이용해 다이얼로그 컴포넌트를 만들어 보자. src/components/Dialog.jsx 파일이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Dialog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">header</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">main</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">footer</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>어플리케이션 하단에 다이얼로그를 추가해보자.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ef2aafd5029bd526636dbce752c2c6fa/066f9/dialog-on-footer.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.47252747252747%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAjABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAIEAQMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfZx1iYwLOfVqgKyHYKQA//EAB4QAAEDBAMAAAAAAAAAAAAAAAMAAQIQERIhIjEz/9oACAEBAAEFAmxuXzF1dE3ALRx5I2hgllBqOmr/AP/EABYRAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAwEBPwEc/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAABACAx/9oACAECAQE/AWGV/8QAHRAAAgEEAwAAAAAAAAAAAAAAAAERECExQRIgUf/aAAgBAQAGPwIY77MHg4nOzVJ4pX7/AP/EAB8QAAMAAgICAwAAAAAAAAAAAAABESFBMWEQcVGBkf/aAAgBAQABPyFNSvoXZPolWT0UgmuHMm0IUttQsufwM9LdWil0CQyJ2cjj4aXwf//aAAwDAQACAAMAAAAQ+P8AA/PP/8QAGBEBAQEBAQAAAAAAAAAAAAAAAREAECH/2gAIAQMBAT8QCuBXHmWt7//EABcRAQEBAQAAAAAAAAAAAAAAAAEAERD/2gAIAQIBAT8QWEsEwYd//8QAHRABAAMAAwEBAQAAAAAAAAAAAQARITFBUXGRgf/aAAgBAQABPxCyL0089/ISVNmqe/DZQ0tsUYM2ER9Vhc4OinCWb/ZU7rsCrQdBCsCfXH7HDxBuw75CEpoQ90dS9hEDuxufaPG9exqreGPEyY48n//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"다이얼로그를 하단에 추가했다.\"\n        title=\"다이얼로그를 하단에 추가했다.\"\n        src=\"/static/ef2aafd5029bd526636dbce752c2c6fa/066f9/dialog-on-footer.jpg\"\n        srcset=\"/static/ef2aafd5029bd526636dbce752c2c6fa/5fc5d/dialog-on-footer.jpg 182w,\n/static/ef2aafd5029bd526636dbce752c2c6fa/accec/dialog-on-footer.jpg 363w,\n/static/ef2aafd5029bd526636dbce752c2c6fa/066f9/dialog-on-footer.jpg 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">다이얼로그를 하단에 추가했다.</figcaption>\n  </figure></p>\n<p>맨 하단에 다이얼로그가 보인다. 배경이 흐리고 팝업이 화면 뷰포트 중앙에 위치해야 더 멋질 것 같다.</p>\n<p>다이얼로그 뒤에 어둡게 깔아둘 .Backdrop css 클래스를 준비했다. 조합해서 사용할 수 있게 별도 컴포넌트로 들자. src/components/Backdrop.jsx 파일이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Backdrop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Backdrop<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이 둘을 조합하면 뒷 배경을 흐리고 중앙에 위치한 멋진 다이얼로그 박스가 등장할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BackDrop</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/043782201220fae6d07698a7ef0750d8/066f9/dialog-on-center.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.47252747252747%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAjABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcsaLDA7HrX+HyXMyLoKkH//xAAdEAACAgEFAAAAAAAAAAAAAAACAwABMQQQEhQh/9oACAEBAAEFAoWBgpIqvStuuNrtDwBfaXGmLGwsB7W//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAHhAAAgEDBQAAAAAAAAAAAAAAAAECEBExICFBkaH/2gAIAQEABj8CrdJbmPRxlkSdznolKOHr/8QAHhAAAgEEAwEAAAAAAAAAAAAAAREAECExQVFhgXH/2gAIAQEAAT8hXcCQK9g8kwZigsHEgbqXTw6hGMwYEzfyX5plpXlDin//2gAMAwEAAgADAAAAECMBD3AP/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAA/9oACAEDAQE/EMxv/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAECAQE/EBT/AP/EAB8QAQADAQACAgMAAAAAAAAAAAEAESExQXFRgWGRwf/aAAgBAQABPxAG2v3GUF9ONQjHfDbjPNmEXfh9MSgV/CVXmZwWD/YmQNumnVlma/aM6gUiuA59Q3wfUSeK2eLiopV8xKLMmcZK5P/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"다이얼로그가 뷰포트 중앙에 위치한다.\"\n        title=\"다이얼로그가 뷰포트 중앙에 위치한다.\"\n        src=\"/static/043782201220fae6d07698a7ef0750d8/066f9/dialog-on-center.jpg\"\n        srcset=\"/static/043782201220fae6d07698a7ef0750d8/5fc5d/dialog-on-center.jpg 182w,\n/static/043782201220fae6d07698a7ef0750d8/accec/dialog-on-center.jpg 363w,\n/static/043782201220fae6d07698a7ef0750d8/066f9/dialog-on-center.jpg 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">다이얼로그가 뷰포트 중앙에 위치한다.</figcaption>\n  </figure></p>\n<p>다이얼로그에 대한 상태를 전역으로 관리하면 좋겠다. 어플리케이션 전반에 사용되기 때문에 어디서든 접근할 수 있기 때문이다. 다이얼로그 상태를 컨택스트로 전달하면 어떤 컴포넌트에서도 소비자를 통해 이 상태를 전달 받을 수 있을 것이다. 라우터 컨택스트와 비슷.</p>\n<p>다이얼로그를 띄우는 방식은 선언적일 뿐만 아니라 프로그래밍적으로도 가능해야 한다. 다이얼로를 띄우는 상황이 동적이기 때문이다. 버튼을 클릭한 뒤나 예외를 처리할 오류 다이얼로그를 띄워야 하는 경우에 사용하기 때문이다. 다이얼로그 상태 변경함수를 필요한 컴포넌트에 주입한다면 컴포넌트는 이 함수를 인자로 받아 사용할 수 있을 것이다. WithRouter 고차 컴포넌트와 비슷.</p>\n<p>다이얼로그를 위한 컨택스트를 설계하고 고차 컴포넌트로 이 횡단 관심사를 각 계층에서 사용할 수 있도록 구현해 보겠다.</p>\n<h1 id=\"레이아웃-컨택스트\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%BB%A8%ED%83%9D%EC%8A%A4%ED%8A%B8\" aria-label=\"레이아웃 컨택스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레이아웃 컨택스트</h1>\n<p>다이얼로그 상태를 전달할 컨택스트를 만들자. 다이얼로그 뿐만 아니라 토스트, 바텀 시트 등의 UI 요소를 포함할 수 있는 <strong>레이아웃</strong>이라는 이름을 사용하겠다. src/lib/MyLayout.jsx 파일을 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> layoutContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nlayoutContext<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token string\">\"LayoutContext\"</span></code></pre></div>\n<p>화면 레이아웃에 대한 메세지를 전달할 레이아웃 컨택스트이다. 다이얼로그 상태를 전달하는 역할을 할 것이다.</p>\n<p>이어서 레이아웃 상태를 보유한 Layout 컴포넌트를 만들자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Layout</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">dialog</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">dialog</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dialog<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layoutContext.Provider</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>layoutContext.Provider</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>리액트 앨리먼트를 저장할 수 있는 상태 dialog를 만들었다. 다이얼로그 앨리먼트를 저장할 용도다. 렌더 메소드에서 컨택스트 프로바이더를 사용하는데 여기에 상태 dialog를 제공한다. Layout 하위 컴포넌트에서는 이 상태를 사용할 수 있을 것이다.</p>\n<p>Router를 어플리케이션 최상단에 감싸서 하위 컴포넌트들에게 라우팅 기능을 제공한 것처럼 App을 Layout으로 감싸자. 하위 컴포넌트들은 모달 기능을 사용할수 있을 것이다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyLayout.Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyRouter.Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyRouter.Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyRouter.Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/cart<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CartPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyRouter.Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/order<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyRouter.Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ProductPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyRouter.Routes</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyRouter.Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyLayout.Layout</span></span><span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 726px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7c79c98308990cdde380af6c78536b23/3acf0/layout-provider.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.08791208791209%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmkyhh//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAECECFB/9oACAEBAAEFApZbR1n/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAABEHH/2gAIAQEABj8CFYr/AP/EABoQAAICAwAAAAAAAAAAAAAAAAABMUEQEYH/2gAIAQEAAT8haC1RY0buDwkf/9oADAMBAAIAAwAAABBQD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQADAQEBAAAAAAAAAAAAAAEAESFxEDH/2gAIAQEAAT8QcuhY5eMPsQ7UOyzahGylZIGueH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"레이아웃 컨택스트 프로바이더로 어플리케이션을 감쌌다.\"\n        title=\"레이아웃 컨택스트 프로바이더로 어플리케이션을 감쌌다.\"\n        src=\"/static/7c79c98308990cdde380af6c78536b23/fee13/layout-provider.jpg\"\n        srcset=\"/static/7c79c98308990cdde380af6c78536b23/5fc5d/layout-provider.jpg 182w,\n/static/7c79c98308990cdde380af6c78536b23/accec/layout-provider.jpg 363w,\n/static/7c79c98308990cdde380af6c78536b23/fee13/layout-provider.jpg 726w,\n/static/7c79c98308990cdde380af6c78536b23/934bb/layout-provider.jpg 1089w,\n/static/7c79c98308990cdde380af6c78536b23/fcb1e/layout-provider.jpg 1452w,\n/static/7c79c98308990cdde380af6c78536b23/3acf0/layout-provider.jpg 2000w\"\n        sizes=\"(max-width: 726px) 100vw, 726px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">레이아웃 컨택스트 프로바이더로 어플리케이션을 감쌌다.</figcaption>\n  </figure></p>\n<p>상태 dialog 값을 하위 컴포넌트 어디선가 렌더링할 차례다. 각 페이지가 항상 사용하는 컴포넌트인 페이지가 적당하겠다. 페이지 컴포넌트에 레이아웃 컨택스트 컨슈머를 사용해 다이얼로그 상태를 주입받고 렌더링 해보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Page</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> header<span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">,</span> footer <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Page<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>header<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>footer<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MyLayout.layoutContext.Consumer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> dialog <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> dialog <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>dialog<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MyLayout.layoutContext.Consumer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Page는 레이아웃 컨택스트를 통해 전달된 다이얼로그 상태를 그릴 것이다. 다이얼로그가 있을 때 백드랍으로 감싸서 렌더링했다.</p>\n<p>Layout의 상태 dialog에 다이얼로그 앨리먼트를 추가해서 테스트해보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Layout</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">dialog</span><span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 726px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8224565a83708fa28ce955b347b7c707/3acf0/dialog-state.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.08791208791209%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUBAgT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHUxSOyxIf/xAAbEAABBAMAAAAAAAAAAAAAAAABAAMQERMkQf/aAAgBAQABBQKnskEbXSv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEBAQEAAAAAAAAAAAAAAAASECKC/9oACAEBAAY/AksK93//xAAdEAACAQQDAAAAAAAAAAAAAAAAAREQITFBUWHx/9oACAEBAAE/IXbOpOpNwNHIfqjI/9oADAMBAAIAAwAAABDQD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEAAwADAAAAAAAAAAAAAAERACExEEFx/9oACAEBAAE/ENRAk13lJMO4Psw6ULMND6zLrB34P//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"레이아웃에 다이얼로그 상태를 지정하면 페이지 컴포넌트에서 렌더한다.\"\n        title=\"레이아웃에 다이얼로그 상태를 지정하면 페이지 컴포넌트에서 렌더한다.\"\n        src=\"/static/8224565a83708fa28ce955b347b7c707/fee13/dialog-state.jpg\"\n        srcset=\"/static/8224565a83708fa28ce955b347b7c707/5fc5d/dialog-state.jpg 182w,\n/static/8224565a83708fa28ce955b347b7c707/accec/dialog-state.jpg 363w,\n/static/8224565a83708fa28ce955b347b7c707/fee13/dialog-state.jpg 726w,\n/static/8224565a83708fa28ce955b347b7c707/934bb/dialog-state.jpg 1089w,\n/static/8224565a83708fa28ce955b347b7c707/fcb1e/dialog-state.jpg 1452w,\n/static/8224565a83708fa28ce955b347b7c707/3acf0/dialog-state.jpg 2000w\"\n        sizes=\"(max-width: 726px) 100vw, 726px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">레이아웃에 다이얼로그 상태를 지정하면 페이지 컴포넌트에서 렌더한다.</figcaption>\n  </figure></p>\n<p>Page 코드를 더 명확히 하자. 헤더, 메인, 푸터의 추상화 수준과 다이얼로그의 추상화 수준이 다르다. 위 세 개는 한 줄로 되어 있어서 각 각 외부로 관심사를 위임했는데 모달은 세부 구현을 여기에 담았기 때문이다. 이러한 추상화 수준의 차이는 객체 역할의 비대칭을 야기하고 코드를 읽기 어렵게 만들기 마련이다.</p>\n<p>모달도 이를 위임해서 다른 녀석들처럼 추상화 수준을 맞추자. 상태 dialog에 따라 렌더링하기 위한 다이얼로그 컨테이너로 분리하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">DialogContainer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layoutContext.Consumer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> dialog <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> dialog <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>dialog<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>layoutContext.Consumer</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>레이아웃 컨택스트를 소비자 컴포넌트로 구독했다. dialog가 있을 경우 백드랍과 조합해서 리액트 앨리먼트를 조건부 렌더링하는 역할이다.</p>\n<p>Page에서 이를 교체한다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Page</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> header<span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">,</span> footer <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Page<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>header<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>footer<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyLayout.DialogContainer</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>다이얼로그 관련 코드가 단 한 줄로 줄었다. 컨택스트를 구독하고 백드랍과 다이얼로그를 조합하는 구현 상세는 Page의 관심사가 아니다. 그저 레이아웃을 잘 나눌수 있는 것만 관심있다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 726px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b724818b6cad2bb7987891830acf8b6e/3acf0/dialog-container.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.08791208791209%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUBAgT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHUyRvypIf/xAAbEAACAQUAAAAAAAAAAAAAAAAAAQMQERMhJP/aAAgBAQABBQK02TVGuoZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxABAQEBAAAAAAAAAAAAAAAAEhAigv/aAAgBAQAGPwJLCvd//8QAHhAAAgEDBQAAAAAAAAAAAAAAAAERECExQVFhofH/2gAIAQEAAT8hds4k6STLHQ0bh+qZH//aAAwDAQACAAMAAAAQmA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAGxABAQACAwEAAAAAAAAAAAAAAREAIRAxQXH/2gAIAQEAAT8Q1ECTXeqSYWivtYJKFmGh8zLrkf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"페이지 컴포넌트 안에 다이얼로그 컨테이너가 위치한다.\"\n        title=\"페이지 컴포넌트 안에 다이얼로그 컨테이너가 위치한다.\"\n        src=\"/static/b724818b6cad2bb7987891830acf8b6e/fee13/dialog-container.jpg\"\n        srcset=\"/static/b724818b6cad2bb7987891830acf8b6e/5fc5d/dialog-container.jpg 182w,\n/static/b724818b6cad2bb7987891830acf8b6e/accec/dialog-container.jpg 363w,\n/static/b724818b6cad2bb7987891830acf8b6e/fee13/dialog-container.jpg 726w,\n/static/b724818b6cad2bb7987891830acf8b6e/934bb/dialog-container.jpg 1089w,\n/static/b724818b6cad2bb7987891830acf8b6e/fcb1e/dialog-container.jpg 1452w,\n/static/b724818b6cad2bb7987891830acf8b6e/3acf0/dialog-container.jpg 2000w\"\n        sizes=\"(max-width: 726px) 100vw, 726px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">페이지 컴포넌트 안에 다이얼로그 컨테이너가 위치한다.</figcaption>\n  </figure></p>\n<h1 id=\"프로그래밍적으로-다이얼로그-제어\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%8B%A4%EC%9D%B4%EC%96%BC%EB%A1%9C%EA%B7%B8-%EC%A0%9C%EC%96%B4\" aria-label=\"프로그래밍적으로 다이얼로그 제어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로그래밍적으로 다이얼로그 제어</h1>\n<p>동적으로 다이얼로그를 관리하기 위해 프로그래밍적인 방식을 제공할 차례다.</p>\n<p>먼저 Layout의 상태 dialog를 변경 함수를 컨택스트에 제공하자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Layout</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">dialog</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>setDialog <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDialog</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></span>  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">setDialog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dialog</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dialog <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">dialog</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>dialog<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">setDialog</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>setDialog<span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layoutContext.Provider</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>contextValue<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>layoutContext.Provider</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>상태 dialog를 변경하는 setDialog 메소드를 만들고 이것을 컨택스트에게 전달했다.</p>\n<p>컨택스트 소비자는 다이얼로그 상태를 제어할 수 있는 setDialog를 사용할 수 있을 것이다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MyLayout.layoutContext.Consumer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> setDialog <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">setDialog</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setDialog</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span></span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      다이얼로그 열기 테스트</span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MyLayout.layoutContext.Consumer</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>상품목록 페이지에 테스트 버튼을 추가했다. 레이아웃 컨택스트를 구독하는데 버튼을 클릭하면 레이아웃 컨택스트가 전달해준 setDialog 함수를 호출한다. 함수 인자로 전달한 리액트 앨리먼트가 Layout의 상태 dialog로 갱신되어 이 상태를 구독중인 DialogContainer에 의해 렌더링 될 것이다.</p>\n<p>3초 후에 setDialog(null) 함수를 실행하면 같은 흐름으로 다이얼로그 상태가 비워져 다이얼로그가 사라진다.</p>\n<p>레이아웃 컨슈머로 어디서든 다이얼로그 상태를 프로그래밍적으로 제어할 수 있다. setDialog 함수를 컨택스트를 통해 제공하기 때문이다. 라우터의 navigate 함수처럼.</p>\n<h1 id=\"withlayout\" style=\"position:relative;\"><a href=\"#withlayout\" aria-label=\"withlayout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>withLayout</h1>\n<p>레이아웃 컨택스트를 사용해서 직접 상태를 변경할수도 있지만 전용 함수를 컴포넌트에 주입하는 것이 사용하기 편하다. 레이아웃 기능을 보강해주는 고차 컴포넌트를 만들어보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withLayout</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">WrappedComponent</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">WithLayout</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layoutContext.Consumer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> dialog<span class=\"token punctuation\">,</span> setDialog <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">const</span> openDialog <span class=\"token operator\">=</span> setDialog</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">closeDialog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setDialog</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span>\n        <span class=\"token keyword\">const</span> enhancedProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          dialog<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">          openDialog<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          closeDialog<span class=\"token punctuation\">,</span></span>        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>enhancedProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>layoutContext.Consumer</span><span class=\"token punctuation\">></span></span></span>  <span class=\"token punctuation\">)</span>\n  WithLayout<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">WithLayout(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getComponentName</span><span class=\"token punctuation\">(</span>WrappedComponent<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token keyword\">return</span> WithLayout\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>레이아웃 기능을 추가할 대상 컴포넌트를 WrappedComponent 인자로 받았다.</p>\n<p>WithLayout 컴포넌트를 정의했다. 이 컴포넌트는 대상 컴포넌트에게 레이아웃 기능을 제공할 고차 컴포넌트가 될 것이다. 레이아웃 컨택스트가 제공한 기능을 사용하기 위해 레이아웃 컨택스트 소비자를 사용했다.</p>\n<p>소비자는 공급자가 제공한 Layout 상태 dialog와 이를 변경하는 함수 setDialog를 사용할 수 있다. setDiaolg를 조합해서 openDialog, closeDialog 함수를 만들어 타겟 컴포넌트에 주입했다.</p>\n<p>이 컴포넌트의 이름을 지정하려고 displayName 속성에 값을 설정했다. 리액트 개발툴에서 고차 컴포넌트를 쉽게 식별할 수 있을 것이다.</p>\n<p>레이아웃 기능을 추가한 WithLayout 컴포넌트를 반환했다.</p>\n<p>상품목록 페이지 컴포넌트에 레이아웃 기능을 추가하기 위해 withLayout 함수를 사용해 보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> openDialog<span class=\"token punctuation\">,</span> closeDialog <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">openDialog</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></span>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> productList <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ProductApi<span class=\"token punctuation\">.</span><span class=\"token function\">fetchProductList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> productList <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">closeDialog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">withLayout</span><span class=\"token punctuation\">(</span>ProductPage<span class=\"token punctuation\">)</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 726px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d9c13106bd4d92f5dfa12390db7b04a/3acf0/with-layout.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.08791208791209%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHYtNKGL//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhARQf/aAAgBAQABBQKVtadZ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BZ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ASf/xAAXEAEAAwAAAAAAAAAAAAAAAAAQAXGB/9oACAEBAAY/Aot1/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERIRAxUf/aAAgBAQABPyF5jyjbIhow25XHsf/aAAwDAQACAAMAAAAQjA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/EB//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCj/8QAHBABAAICAwEAAAAAAAAAAAAAAQARQVEQITHB/9oACAEBAAE/EELSKytMHKd0wxOsQaEKjT6k+OD/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WithLayout\"\n        title=\"WithLayout\"\n        src=\"/static/5d9c13106bd4d92f5dfa12390db7b04a/fee13/with-layout.jpg\"\n        srcset=\"/static/5d9c13106bd4d92f5dfa12390db7b04a/5fc5d/with-layout.jpg 182w,\n/static/5d9c13106bd4d92f5dfa12390db7b04a/accec/with-layout.jpg 363w,\n/static/5d9c13106bd4d92f5dfa12390db7b04a/fee13/with-layout.jpg 726w,\n/static/5d9c13106bd4d92f5dfa12390db7b04a/934bb/with-layout.jpg 1089w,\n/static/5d9c13106bd4d92f5dfa12390db7b04a/fcb1e/with-layout.jpg 1452w,\n/static/5d9c13106bd4d92f5dfa12390db7b04a/3acf0/with-layout.jpg 2000w\"\n        sizes=\"(max-width: 726px) 100vw, 726px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">WithLayout</figcaption>\n  </figure></p>\n<p>컴포넌트 트리에 WithLayout이란 태그가 붙은 ProductPage 컴포넌트를 확인했다. 이 페이지 컴포넌트에 레이아웃 인자가 추가 될 것이다.</p>\n<p>컴포넌트가 마운트되고 나면 다이얼로그가 화면에 보일 것이다. api 호출하고 나면 다이얼로그가 사라질 것이다.</p>\n<p>DialogContainer도 withLayout으로 코드를 간결하게 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> DialogContainer <span class=\"token operator\">=</span> <span class=\"token function\">withLayout</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> dialog <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> dialog <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>dialog<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Backdrop</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"다이얼로그-조합\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%9D%B4%EC%96%BC%EB%A1%9C%EA%B7%B8-%EC%A1%B0%ED%95%A9\" aria-label=\"다이얼로그 조합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다이얼로그 조합</h1>\n<p>컨택스트와 고차 컴포넌트 패턴을 사용해 요구사항을 구현할 수 있는 기반을 마련했다.</p>\n<p>요구사항을 다시 보자.</p>\n<ul>\n<li>0.4 API 호출시 로딩 메세지를 다이얼로그로 표시한다. (다이얼로그)</li>\n<li>0.5 예외 처리용 메세지를 다이얼로그로 표시한다. (다이얼로그)</li>\n<li>2.7 결제하기 버튼을 클릭하면 사용자 확인을 받는다. (다이얼로그)</li>\n</ul>\n<p>세 가지 형태의 다이얼로그가 필요한다.</p>\n<ul>\n<li>로딩 다이얼로그</li>\n<li>오류 전용 다이얼로그</li>\n<li>사용자 확인 다이얼로그</li>\n</ul>\n<p>이 세 가지를 조합할 수 있도록 Dialog 인자를 열어야겠다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Dialog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> header<span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">,</span> footer <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></span>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>header <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>header<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>footer <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>footer<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>header, children, footer 를 외부에서 결정하도록 열어 두었다.</p>\n<p>이제 상품 목록을 가져올 때 \"로딩중...\" 이란 메세지가 다이얼로그에 표시되도록 바꿔보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>openDialog<span class=\"token punctuation\">,</span> closeDialog<span class=\"token punctuation\">}</span><span class=\"token operator\">=</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">openDialog</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">메뉴 목록 로딩중...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Dialog</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> productList <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ProductApi<span class=\"token punctuation\">.</span><span class=\"token function\">fetchProductList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> productList <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">closeDialog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>이 다이얼로그는 장바구니와 주문내역 화면에서도 사용할 수 있다. 로딩 초기에 데이터 조회 api를 호출하기 때문이다.\n각 컴포넌트에서 openDialog 함수에 로딩중 메세지를 담은 리액트 앨리먼트를 전달하기 보다는 이 기능을 공통으로 제공하자.</p>\n<p>WithLayout 역할로 옮기겠다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withLayout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">WithLayout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layoutContext.Consumer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> dialog<span class=\"token punctuation\">,</span> openDialog<span class=\"token punctuation\">,</span> closeDialog <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">startLoading</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">openDialog</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Dialog</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">const</span> finishLoading <span class=\"token operator\">=</span> closeDialog<span class=\"token punctuation\">;</span></span>\n        <span class=\"token keyword\">const</span> enhancedProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          dialog<span class=\"token punctuation\">,</span>\n          openDialog<span class=\"token punctuation\">,</span>\n          closeDialog<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">          startLoading<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          finishLoading<span class=\"token punctuation\">,</span></span>        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>enhancedProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">//...</span></code></pre></div>\n<p>startLoading을 만들었다. openDialog 함수를 호출하는데 다이얼로그 컴포넌트를 사용해 로딩 다이얼로그를 만들었다. finishLoading은 다이얼로그를 닫는 함수를 호출한다. 두 메서드를 enhancedProps로 해서 컴포넌트에 제공했다.</p>\n<p>사용해 보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> startLoading<span class=\"token punctuation\">,</span> finishLoading <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">startLoading</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"메뉴 목록 로딩중...\"</span><span class=\"token punctuation\">)</span></span>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> productList <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ProductApi<span class=\"token punctuation\">.</span><span class=\"token function\">fetchProductList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> productList <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">finishLoading</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>메뉴목록 화면에서 상품 데이터를 가져올 때 로딩 메세지를 보여준다. 데이터 페치를 마치고 상태를 업데이트한 뒤 로딩메세지를 제거했다.</p>\n<p>이전에는 Dialog를 직접 전달하고 닫았는데 지금은 로딩이라는 개념으로 추상화 했다. 게다가 코드도 재사용할 수 있다.</p>\n<p>장바구니와 주문 내역에도 사용하자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CartPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> params<span class=\"token punctuation\">,</span> startLoading<span class=\"token punctuation\">,</span> finishLoading <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> productId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">params</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>productId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">startLoading</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"장바구니에 담는중...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> product <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> ProductApi<span class=\"token punctuation\">.</span><span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span>productId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> product <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">finishLoading</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">MyLayout<span class=\"token punctuation\">.</span><span class=\"token function\">withLayout</span><span class=\"token punctuation\">(</span>MyRouter<span class=\"token punctuation\">.</span><span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>CartPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> startLoading<span class=\"token punctuation\">,</span> finishLoading <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">startLoading</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"주문 정보 로딩중...\"</span><span class=\"token punctuation\">)</span></span>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> order <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> OrderApi<span class=\"token punctuation\">.</span><span class=\"token function\">fetchMyOrder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> order <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">finishLoading</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">withLayout</span><span class=\"token punctuation\">(</span>OrderPage<span class=\"token punctuation\">)</span></code></pre></div>\n<p>요구사항</p>\n<ul>\n<li><strong><del>0.4 API 호출시 로딩 메세지를 다이얼로그로 표시한다. (다이얼로그)</del></strong></li>\n<li>0.5 예외 처리용 메세지를 다이얼로그로 표시한다. (다이얼로그)</li>\n<li>2.7 결제하기 버튼을 클릭하면 사용자 확인을 받는다. (다이얼로그)</li>\n</ul>\n<h1 id=\"중간-정리\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EA%B0%84-%EC%A0%95%EB%A6%AC\" aria-label=\"중간 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>중간 정리</h1>\n<p>다이얼로그 기능을 구현했다.</p>\n<ul>\n<li>레이아웃 컨택스트: 어플리케이션 전반에 레이아웃 메세지를 전달</li>\n<li>WithLayout: 동적으로 표현되는 다이얼로그를 제어하기 위한 기능 제공</li>\n</ul>\n<p>세 가지 다이얼로그를 제공했다.</p>\n<ul>\n<li>다이얼로그를 조합하는 형태로 변경</li>\n</ul>\n<p>다음 장에서 나머지 다이얼로그 요구사항도 구현해 보자.</p>","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch4","date":"2023-06-24T00:02:04.000Z","title":"[리액트 2부] 2.4 다이얼로그 1","tags":["react"],"series":"[리액트 2부] 고급주제와 훅","videoId":null,"featuredImage":null},"tableOfContents":"<ul>\n<li><a href=\"#dialog\">Dialog</a></li>\n<li><a href=\"#%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%BB%A8%ED%83%9D%EC%8A%A4%ED%8A%B8\">레이아웃 컨택스트</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%8B%A4%EC%9D%B4%EC%96%BC%EB%A1%9C%EA%B7%B8-%EC%A0%9C%EC%96%B4\">프로그래밍적으로 다이얼로그 제어</a></li>\n<li><a href=\"#withlayout\">withLayout</a></li>\n<li><a href=\"#%EB%8B%A4%EC%9D%B4%EC%96%BC%EB%A1%9C%EA%B7%B8-%EC%A1%B0%ED%95%A9\">다이얼로그 조합</a></li>\n<li><a href=\"#%EC%A4%91%EA%B0%84-%EC%A0%95%EB%A6%AC\">중간 정리</a></li>\n</ul>","excerpt":"나머지 다이얼로그 관련 요구사항들이다. 0.4 API 호출시 로딩 메세지를 다이얼로그로 표시한다. (다이얼로그) 0.5 예외 처리용 메세지를 다이얼로그로 표시한다. (다이얼로그) 2.7 결제하기 버튼을 클릭하면 사용자 확인을 받는다. (다이얼로그) 지난 장에 이어 리액트 컨택스트와 고차 컴포넌트 패턴을 사용하겠다. Dialog 먼저 ui…"},"video":null,"allMarkdownRemark":{"nodes":[{"id":"a3949e40-6a8f-55c4-9a88-48a6b17cab4c","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1","date":"2023-06-24T00:01:00.000Z","title":"[리액트 2부] 1편 리액트로 사고하기","series":"[리액트 2부] 고급주제와 훅"}},{"id":"10aeca1e-0d73-550c-814b-6ef3a174a272","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch1","date":"2023-06-24T00:01:01.000Z","title":"[리액트 2부] 1.1 준비","series":"[리액트 2부] 고급주제와 훅"}},{"id":"d103d50d-65e9-5163-a680-62363da01698","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch2","date":"2023-06-24T00:01:02.000Z","title":"[리액트 2부] 1.2 상품목록 화면","series":"[리액트 2부] 고급주제와 훅"}},{"id":"d101c79d-5138-58c6-81b1-e1c763ec85b7","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch3","date":"2023-06-24T00:01:03.000Z","title":"[리액트 2부] 1.3 주문내역 화면","series":"[리액트 2부] 고급주제와 훅"}},{"id":"40f60626-8583-5f50-9cb6-f5645101a9c6","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch4","date":"2023-06-24T00:01:04.000Z","title":"[리액트 2부] 1.4 장바구니 화면","series":"[리액트 2부] 고급주제와 훅"}},{"id":"8d1770e8-e5c2-517e-8002-e37812e72dfe","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part1-ch5","date":"2023-06-24T00:01:05.000Z","title":"[리액트 2부] 1편 최종정리","series":"[리액트 2부] 고급주제와 훅"}},{"id":"458e6b29-6d0a-5075-b688-8a8a94ccefd4","frontmatter":{"slug":"/2023/06/24/lecture-react-season2","date":"2023-06-24T00:02:00.000Z","title":"[리액트 2부] 2편 고급주제","series":"[리액트 2부] 고급주제와 훅"}},{"id":"d8402e6b-417a-516a-a6b3-07331c7a43c4","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch1","date":"2023-06-24T00:02:01.000Z","title":"[리액트 2부] 2.1 컨택스트","series":"[리액트 2부] 고급주제와 훅"}},{"id":"fd806d95-7c95-5fc3-a32b-4d1ea0cad049","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch2","date":"2023-06-24T00:02:02.000Z","title":"[리액트 2부] 2.2 라우터 1","series":"[리액트 2부] 고급주제와 훅"}},{"id":"5b02b663-8e0c-58fb-97a7-ed7018371077","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch3","date":"2023-06-24T00:02:03.000Z","title":"[리액트 2부] 2.3 라우터 2","series":"[리액트 2부] 고급주제와 훅"}},{"id":"360c5627-4b69-539e-b056-caffd631bee9","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch4","date":"2023-06-24T00:02:04.000Z","title":"[리액트 2부] 2.4 다이얼로그 1","series":"[리액트 2부] 고급주제와 훅"}},{"id":"2f981235-0d19-5e8e-8309-253da9b4b3ac","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch5","date":"2023-06-24T00:02:05.000Z","title":"[리액트 2부] 2.5 다이얼로그 2","series":"[리액트 2부] 고급주제와 훅"}},{"id":"1f35fa1b-0a33-5035-b844-efcb0c967688","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch6","date":"2023-06-24T00:02:06.000Z","title":"[리액트 2부] 2편 최종정리","series":"[리액트 2부] 고급주제와 훅"}},{"id":"0a51e0a1-ff3c-5f75-9b68-fd370827174f","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3","date":"2023-06-24T00:03:00.000Z","title":"[리액트 2부] 3편 기본훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"5a1eb2d4-889b-5c99-9741-8a909bb421d2","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch1","date":"2023-06-24T00:03:01.000Z","title":"[리액트 2부] 3.1 클래스/함수 컴포넌트","series":"[리액트 2부] 고급주제와 훅"}},{"id":"adf0b01d-2fe9-52ea-a660-f99eb6e43a2f","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch2","date":"2023-06-24T00:03:02.000Z","title":"[리액트 2부] 3.2 상태 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"8db42df9-10c7-5d69-a22a-855b8d07a3e3","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch3","date":"2023-06-24T00:03:03.000Z","title":"[리액트 2부] 3.3 부수효과 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"26e4b794-4f27-53e5-b37b-619fd2f3eec1","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch4","date":"2023-06-24T00:03:04.000Z","title":"[리액트 2부] 3.4 훅 활용 1","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ebb25f92-6395-508c-a520-4ceb2cde3e79","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch5","date":"2023-06-24T00:03:05.000Z","title":"[리액트 2부] 3.5 컨택스트 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"df39246f-a953-5bb8-9b93-e7dce1c1892a","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch6","date":"2023-06-24T00:03:06.000Z","title":"[리액트 2부] 3.6 훅 활용 2","series":"[리액트 2부] 고급주제와 훅"}},{"id":"3081cea1-8b4f-57ef-a54f-d241e7e106e9","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part3-ch7","date":"2023-06-24T00:03:07.000Z","title":"[리액트 2부] 3편 최종정리","series":"[리액트 2부] 고급주제와 훅"}},{"id":"ff268c7c-b451-560f-8c1a-fff063bbbdd8","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4","date":"2023-06-24T00:04:00.000Z","title":"[리액트 2부] 4편 추가훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"28d8ea25-f6ab-53d9-8d8d-681a43e8856c","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch1","date":"2023-06-24T00:04:01.000Z","title":"[리액트 2부] 4.1 레프 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"7cfc7eee-a37e-5f6a-b961-f3df6a405a2d","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch2","date":"2023-06-24T00:04:02.000Z","title":"[리액트 2부] 4.2 제어 폼","series":"[리액트 2부] 고급주제와 훅"}},{"id":"93c5cdcb-64fc-58a8-bf8e-e50da44a9eee","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch3","date":"2023-06-24T00:04:03.000Z","title":"[리액트 2부] 4.3 리듀서 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"924e27e8-e2bb-5422-92c4-b5b0710eed15","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch4","date":"2023-06-24T00:04:04.000Z","title":"[리액트 2부] 4.4 메모이제이션 훅","series":"[리액트 2부] 고급주제와 훅"}},{"id":"8ef47dc5-f1d8-5527-9ae0-020099be4140","frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part4-ch5","date":"2023-06-24T00:04:05.000Z","title":"[리액트 2부] 4편 최종정리","series":"[리액트 2부] 고급주제와 훅"}}]}},"pageContext":{"slug":"/2023/06/24/lecture-react-season2-part2-ch4","date":"2023-06-24T00:02:04.000Z","series":"[리액트 2부] 고급주제와 훅","videoId":null,"previous":{"frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch3","date":"2023-06-24T00:02:03.000Z","title":"[리액트 2부] 2.3 라우터 2","category":null,"series":"[리액트 2부] 고급주제와 훅","videoId":null}},"next":{"frontmatter":{"slug":"/2023/06/24/lecture-react-season2-part2-ch5","date":"2023-06-24T00:02:05.000Z","title":"[리액트 2부] 2.5 다이얼로그 2","category":null,"series":"[리액트 2부] 고급주제와 훅","videoId":null}}}},"staticQueryHashes":["2263867198"]}