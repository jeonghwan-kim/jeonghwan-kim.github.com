{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/series/2018/12/16/node-web-16_body-parser.html","result":{"data":{"site":{"siteMetadata":{"title":"ê¹€ì •í™˜ ë¸”ë¡œê·¸","url":"https://jeonghwan-kim.github.io"}},"markdownRemark":{"id":"d83a8980-ace4-529e-adb0-61dc9151e698","html":"<h2 id=\"ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"ëª©í‘œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ³ëª©í‘œ</h2>\n<p>ìš”ì²­ ë°”ë”” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” body-parserë¥¼ ë§Œë“­ë‹ˆë‹¤.\nê·¸ë¦¬ê³  ì´ê²ƒì„ ì´ìš©í•´ í¬ìŠ¤íŠ¸ ìƒì„± API ê°œë°œì„ ì™„ë£Œí•©ë‹ˆë‹¤.</p>\n<h2 id=\"ìŠ¤íŠ¸ë¦¼-ë°ì´í„°\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%8A%B8%EB%A6%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0\" aria-label=\"ìŠ¤íŠ¸ë¦¼ ë°ì´í„° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¤íŠ¸ë¦¼ ë°ì´í„°</h2>\n<p>ì§€ë‚œ ì‹œê°„ì— POST ë©”ì†Œë“œë¥¼ ê°–ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¼ìš°í„°ì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\në‹¤ë§Œ ì»¨íŠ¸ë¡¤ëŸ¬ í•¨ìˆ˜ëŠ” ë¹„ì–´ ìˆëŠ” ì±„ë¡œ ë‚¨ê²¨ ë‘ì—ˆëŠ”ë°ìš”.\nreq.body ê°’ì„ ë¡œê·¸ë¡œ ì¶œë ¥í•˜ëŠ”ê²ƒ ê¹Œì§€ë§Œ ì½”ë”©í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ ë°ì´í„°ëŠ” ì–´ë–»ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì„ê¹Œìš”?</p>\n<p><a href=\"https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/#request-body\">ë…¸ë“œ ë¬¸ì„œ</a>ì—ì„œ ìš”ì²­ ë°”ë””ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•˜ê³  ìˆëŠ”ë°ìš” ì •ë¦¬í•˜ë©´ ë‹¤ìŒ ìˆœì„œë¥¼ ë”°ë¦…ë‹ˆë‹¤.</p>\n<ul>\n<li>reqëŠ” ReadableStream ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë‹¤</li>\n<li>ì´ê²ƒì€ ìŠ¤íŠ¸ë¦¼ì´ê¸° ë•Œë¬¸ì— \"data\"ì™€ \"end\" ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•´ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆë‹¤</li>\n<li>\"data\" ì´ë²¤íŠ¸ì™€ í•¨ê»˜ ë“¤ì–´ì˜¨ ë°ì´í„°ëŠ” Buffer íƒ€ì…ì´ë‹¤</li>\n<li>ì´ê²ƒì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ë ¤ë©´ ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë“¤ê³  ìˆë‹¤ê°€ \"end\" ì´ë²¤íŠ¸ ì‹œì ì— í•©ì¹˜ë©´ ëœë‹¤</li>\n</ul>\n<p>ìœ„ ì•Œê³ ë¦¬ì¦˜ì„ ê¸°ìˆ í•œ ê²ƒì´ ì•„ë˜ ìƒ˜í”Œ ì½”ë“œì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> body <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nrequest\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">chunk</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    body <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// ì´ ì‹œì ì— bodyëŠ” ì „ì²´ ìš”ì²­ ë°ì´í„°ë¥¼ ë¬¸ìì—´ í˜•íƒœë¡œ ê°€ì§€ê³  ìˆë‹¤</span>\n    <span class=\"token comment\">// (at this point, `body` has the entire request body stored in it as a string)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>API ì»¨íŠ¸ë¡¤ëŸ¬ í•¨ìˆ˜ì—ì„œ ìš”ì²­ ë°”ë””ì— ì‰½ê²Œ ì ‘ê·¼í•˜ë ¤ë©´ ì¢‹ê² ëŠ”ë° ë§¤ ìš”ì²­ë§ˆë‹¤ ìœ„ ì½”ë”©ì„ í•˜ëŠ”ê±´ ë¯¸ë ¨í•œ ë°©ë²•ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.</p>\n<p>ë§Œì•½ ì»¨íŠ¸ë¡¤ëŸ¬ê¹Œì§€ ì˜¤ê¸° ì „ì— ë¯¸ë¦¬ ë°”ë”” ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ req.bodyì— ë‹´ì•„ ë†“ëŠ”ë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\nì´í›„ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ê°„ë‹¨íˆ req.bodyë¥¼ ì´ìš©í•˜ë©´ ë°ì´í„°ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë„¤ìš”.</p>\n<h2 id=\"ì‹¤ìŠµ---body-parserë¥¼-ë§Œë“¤ì–´-ë³´ì„¸ìš”\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5---body-parser%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%B3%B4%EC%84%B8%EC%9A%94\" aria-label=\"ì‹¤ìŠµ   body parserë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤ì‹¤ìŠµ - body-parserë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”</h2>\n<p>req.pathì™€ req.queryë„ ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ê°€ê³µí–ˆì—ˆì£ ?\nì´ê²ƒê³¼ ë¹„ìŠ·í•˜ê²Œ req.bodyì—ë„ ë¯¸ë¦¬ ê°€ê³µëœ ìš”ì²­ ë°”ë””ë¥¼ ì €ì¥í•´ ë³´ì„¸ìš”.</p>\n<h2 id=\"í’€ì´\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤í’€ì´</h2>\n<p>ê°™ì´ í’€ì–´ë³´ê² ìŠµë‹ˆë‹¤.\në°”ë”” íŒŒì„œë¥¼ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¡œ ë§Œë“¤ê¸°ë¡œ í• ê²Œìš”.\nmiddlewares í´ë”ì— body-parser.js íŒŒì¼ì„ ë§Œë“¤ì–´ ì•„ë˜ ì½”ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bodyParser</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> body <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">chunk</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> chunk<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    body <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> bodyParser<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ ë°ì´í„° ë°”ë””ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œëŠ” ìƒ˜í”Œ ì½”ë“œì—ì„œ ê·¸ëŒ€ë¡œ ë°°ê»´ ì™”ìŠµë‹ˆë‹¤.\në‹¤ë§Œ ê·¸ ì‹œì ì— ë°ì´í„°ê°€ ê° ê° ì–´ë–¤ ëª¨ìŠµìœ¼ë¡œ ë³€í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ í„°ë¯¸ë„ì— ì¶œë ¥í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ë¯¸ë“¤ì›¨ì–´ë¥¼ ìš°ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¶”ê°€í•´ ë³´ì§€ìš”. app.jsë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> bodyParser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./middlewares/body-parser\"</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">bodyParser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// body-parserë¥¼ ì¶”ê°€</span></code></pre></div>\n<p>ì„œë²„ë¥¼ ì¬êµ¬ë™í•˜ê³  í¼ì„ ë‹¤ì‹œ ì „ì†¡í•´ ë³¼ê¹Œìš”?</p>\n<p><img src=\"/assets/imgs/2018/12/16/result_1.png\" alt=\"\"></p>\n<p>\"data\" ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•ŒëŠ” ë²„í¼ê°’ì´ ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.\në°ì´í„°ë¥¼ ëª¨ë‘ ìˆ˜ì‹ í•œ \"end\" ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•ŒëŠ” ë²„í¼ë¥¼ ë¬¸ìì—´ë¡œ ë³€ê²½í•˜ì—¬ \"title=asd&#x26;body=sdf\"ë¼ëŠ” ê°’ì´ ì¶œë ¥ë˜ì—ˆë„¤ìš”.</p>\n<p>ê°€ë§Œíˆ ë³´ë©´ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ê³¼ êµ¬ì¡°ê°€ ë˜‘ê°™ë„¤ìš”?\në„¤, ê·¸ë ‡ìŠµë‹ˆë‹¤.\nì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ì˜¤ë¸Œì íŠ¸ë¡œ íŒŒì‹±í•œ ê²ƒì²˜ëŸ¼,\nì´ ë¬¸ìì—´ë„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œ íŒŒì‹±í•œ ë’¤ req.bodyì— ë„£ì–´ë‘ë©´ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ê² ë„¤ìš”.</p>\n<p>body-parserë¥¼ ë” ê°œë°œí•´ ë³´ì£ .</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  body <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  body <span class=\"token operator\">=</span> body<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&amp;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">body<span class=\"token punctuation\">,</span> pair</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>pair<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> body\n    <span class=\"token keyword\">const</span> frg <span class=\"token operator\">=</span> pair<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"=\"</span><span class=\"token punctuation\">)</span>\n    body<span class=\"token punctuation\">[</span>frg<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> frg<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> body\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  req<span class=\"token punctuation\">.</span>body <span class=\"token operator\">=</span> body\n  <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>íŠ¹ì • ë¬¸ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì‹±í•˜ëŠ” ë¶€ë¶„ì€ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ íŒŒì‹±ê³¼ ê°™ì€ ë¡œì§ì…ë‹ˆë‹¤.\níŒŒì‹±í•œ ê²°ê³¼ bodyì— ì˜¤ë¸Œì íŠ¸ í˜•íƒœë¡œ ë°ì´í„°ê°€ ë‹´ê¸°ê² ì§€ìš”.\nê·¸ëŸ¬ë©´ req.bodyì— ì´ ê°ì²´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</p>\n<p>ë§ˆì§€ë§‰ì—” ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•´ ì£¼ê¸° ìœ„í•´ next() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.</p>\n<p><img src=\"/assets/imgs/2018/12/16/struct_1.png\" alt=\"\"></p>\n<p>body-parserëŠ” ì „ì²´ êµ¬ì¡°ë„ ì¤‘ ìš°ì¸¡ í•˜ë‹¨ì˜ ì¨ë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¹ì…˜ì— ìœ„ì¹˜í•˜ëŠ” ë…€ì„ì…ë‹ˆë‹¤.</p>\n<h2 id=\"ì‹¤ìŠµ---í¬ìŠ¤íŠ¸-ì¶”ê°€-api-ê°œë°œì„-ì™„ì„±í•˜ì„¸ìš”\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5---%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EC%B6%94%EA%B0%80-api-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%99%84%EC%84%B1%ED%95%98%EC%84%B8%EC%9A%94\" aria-label=\"ì‹¤ìŠµ   í¬ìŠ¤íŠ¸ ì¶”ê°€ api ê°œë°œì„ ì™„ì„±í•˜ì„¸ìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤ì‹¤ìŠµ - í¬ìŠ¤íŠ¸ ì¶”ê°€ API ê°œë°œì„ ì™„ì„±í•˜ì„¸ìš”</h2>\n<p>req.body ë°ì´í„°ë¥¼ ì´ìš©í•´ POST /api/posts ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë§ˆì ¸ êµ¬í˜„í•´ ë³´ì„¸ìš”.\nì½”ë“œë¥¼ ë¯¸ì³ ì‘ì„±í•˜ì§€ ëª»í•˜ì‹  ë¶„ì€ ì•„ë˜ ë¸Œëœì¹˜ë¡œ ì´ë™í•œ ë’¤ ì‹¤ìŠµì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ git checkout -f middleware/body-parser</code></pre></div>\n<p><em>íŒíŠ¸: 201 ì‘ë‹µ, ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì‘ë‹µ</em></p>\n<h2 id=\"í’€ì´-1\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4-1\" aria-label=\"í’€ì´ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤í’€ì´</h2>\n<p>ì˜ í’€ì–´ ë³´ì…¨ë‚˜ìš”? ê·¸ëŸ¼ ê°™ì´ ì§„í–‰í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p>routers/api/post.js íŒŒì¼ì„ ë§ˆì ¸ ìˆ˜ì •í•˜ì§€ìš”.\në‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ  ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">create</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body\n  <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>post<span class=\"token punctuation\">.</span>title <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>post<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'parameter error'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê°ì²´ í•´ì²´ ë¬¸ë²•ìœ¼ë¡œ titleê³¼ bodyë¥¼ ê° ìƒìˆ˜ê°’ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.\nê·¸ë¦¬ê³  ê¸°ì¡´ ë°ì´í„° í˜•ì‹ì— ë§ê²Œ ì¬ ê°€ê³µí•´ì„œ post ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<p>ë§Œì•½ titleì´ë‚˜ body ê°’ ì¤‘ ì–´ëŠ í•˜ë‚˜ë¼ë„ ë¶€ì¡±í•˜ë©´ íŒŒë¼ë§¤í„° ì—ëŸ¬ë¥¼ ì˜ë¯¸í•˜ëŠ” 400ë²ˆ ìƒíƒœì½”ë“œë¥¼ ì‘ë‹µí•˜ê³  í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  posts <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>post<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">)</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">201</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>í¬ìŠ¤íŠ¸ ì¶”ê°€ì— í•„ìš”í•œ ë°ì´í„°ê°€ í™•ë³´ë˜ë©´ í¬ìŠ¤íŠ¸ë¥¼ ë‹´ê³  ìˆëŠ” ë°°ì—´ ë§¨ ì•ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ë¦¬ì†ŒìŠ¤ ìƒì„±ì„ ì˜ë¯¸í•˜ëŠ” 201 ìƒíƒœì½”ë“œì™€ ìƒì„±ëœ í¬ìŠ¤íŠ¸ ê°ì²´ë¥¼ ì‘ë‹µ ë°”ë””ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.</p>\n<p>ê·¸ëŸ¼ ì—¬ê¸°ê¹Œì§€ ì½”ë”©ì„ ë§ˆì¹œ ë’¤ ì„œë²„ë¥¼ ì¬êµ¬ë™ í•©ì‹œë‹¤.\në¸Œë¼ìš°ì ¸ë¥¼ í†µí•´ í¬ìŠ¤íŠ¸ ìƒì„± í¼ì„ ì „ì†¡í•´ ë³¼ê¹Œìš”?</p>\n<p><img src=\"/assets/imgs/2018/12/16/result_2.png\" alt=\"\"></p>\n<p>ì…ë ¥í•œ post4ê°€ ë§¨ ìƒë‹¨ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h2>\n<ul>\n<li>ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•´ ìŠ¤íŠ¸ë¦¼ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.</li>\n<li>ìš”ì²­ ë°”ë””ë¥¼ íŒŒì‹±í•˜ì—¬ API ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì†ì‰½ê²Œ ì‚¬ìš©í• ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.</li>\n<li>í¬ìŠ¤íŠ¸ ì¶”ê°€ APIë¥¼ ì™„ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</li>\n</ul>\n<p><a href=\"/series/2018/12/01/node-web-0_index.html\">ëª©ì°¨ ë°”ë¡œê°€ê¸°</a></p>","frontmatter":{"slug":"/series/2018/12/16/node-web-16_body-parser.html","date":"2018-12-16T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 16. body-parser","tags":["lecture"],"series":"Node.js ì½”ë“œë©","videoId":null,"featuredImage":null},"tableOfContents":"<ul>\n<li><a href=\"#%EB%AA%A9%ED%91%9C\">ğŸŒ³ëª©í‘œ</a></li>\n<li><a href=\"#%EC%8A%A4%ED%8A%B8%EB%A6%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0\">ìŠ¤íŠ¸ë¦¼ ë°ì´í„°</a></li>\n<li><a href=\"#%EC%8B%A4%EC%8A%B5---body-parser%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%B3%B4%EC%84%B8%EC%9A%94\">ğŸ¤ì‹¤ìŠµ - body-parserë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4\">ğŸ¤í’€ì´</a></li>\n<li><a href=\"#%EC%8B%A4%EC%8A%B5---%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EC%B6%94%EA%B0%80-api-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%99%84%EC%84%B1%ED%95%98%EC%84%B8%EC%9A%94\">ğŸ¤ì‹¤ìŠµ - í¬ìŠ¤íŠ¸ ì¶”ê°€ API ê°œë°œì„ ì™„ì„±í•˜ì„¸ìš”</a></li>\n<li><a href=\"#%ED%92%80%EC%9D%B4-1\">ğŸ¤í’€ì´</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">ì •ë¦¬</a></li>\n</ul>","excerpt":"ğŸŒ³ëª©í‘œ ìš”ì²­ ë°”ë”” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” body-parserë¥¼ ë§Œë“­ë‹ˆë‹¤.\nê·¸ë¦¬ê³  ì´ê²ƒì„ ì´ìš©í•´ í¬ìŠ¤íŠ¸ ìƒì„± API ê°œë°œì„ ì™„ë£Œí•©ë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¼ ë°ì´í„° ì§€ë‚œ ì‹œê°„ì— POST ë©”ì†Œë“œë¥¼ ê°–ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¼ìš°í„°ì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\në‹¤ë§Œ ì»¨íŠ¸ë¡¤ëŸ¬ í•¨ìˆ˜ëŠ” ë¹„ì–´ ìˆëŠ” ì±„ë¡œ ë‚¨ê²¨ ë‘ì—ˆëŠ”ë°ìš”.\nreq.bodyâ€¦"},"video":null,"allMarkdownRemark":{"nodes":[{"id":"95a7d198-fe1f-5683-9354-26e10e6ed386","frontmatter":{"slug":"/series/2018/12/01/node-web-1_orientation.html","date":"2018-12-01T00:00:00.000Z","title":"[Node.js ì½”ë“œë©] 1.ì˜¤ë¦¬ì—”í…Œì´ì…˜","series":"Node.js ì½”ë“œë©"}},{"id":"a8108e92-6a5b-5e9a-abc8-d5ce7a4df068","frontmatter":{"slug":"/series/2018/12/02/node-web-2_http.html","date":"2018-12-02T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 2.ê¸°ë³¸ ëª¨ë“ˆ http","series":"Node.js ì½”ë“œë©"}},{"id":"93e7c545-496f-5d72-957d-f008eb7c39a9","frontmatter":{"slug":"/series/2018/12/03/node-web-3_refactoring.html","date":"2018-12-03T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 3.ë¦¬íŒ©í† ë§","series":"Node.js ì½”ë“œë©"}},{"id":"37f993ac-ef58-526b-adbe-abc7e3505e51","frontmatter":{"slug":"/series/2018/12/04/node-web-4_application.html","date":"2018-12-04T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 4.ì–´í”Œë¦¬ì¼€ì´ì…˜","series":"Node.js ì½”ë“œë©"}},{"id":"cd6299da-2ab2-5adf-a8db-bbe0d42af1d7","frontmatter":{"slug":"/series/2018/12/05/node-web-5_debug.html","date":"2018-12-05T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 5.ì»¤ìŠ¤í…€ ëª¨ë“ˆ Debug","series":"Node.js ì½”ë“œë©"}},{"id":"08348d20-d465-58cb-b4db-39b890338ccd","frontmatter":{"slug":"/series/2018/12/06/node-web-6_static-files.html","date":"2018-12-06T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 6.ì •ì  íŒŒì¼","series":"Node.js ì½”ë“œë©"}},{"id":"b68d9eaa-a4c6-5777-a93d-16d3078cf2bc","frontmatter":{"slug":"/series/2018/12/07/node-web-7_serve-static.html","date":"2018-12-07T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 7.ì»¤ìŠ¤í…€ ëª¨ë“ˆ serve-static","series":"Node.js ì½”ë“œë©"}},{"id":"e3c125ca-6dff-5e31-87ec-3dfc3680d0e5","frontmatter":{"slug":"/series/2018/12/08/node-web-8_middleware.html","date":"2018-12-08T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 8.ë¯¸ë“¤ì›¨ì–´","series":"Node.js ì½”ë“œë©"}},{"id":"e10b1985-61e4-5677-be28-ab18339da690","frontmatter":{"slug":"/series/2018/12/09/node-web-9_middleware2.html","date":"2018-12-09T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 9.ë¯¸ë“¤ì›¨ì–´ í™œìš©","series":"Node.js ì½”ë“œë©"}},{"id":"8be694c5-7499-5e3e-b04d-d2950261e5aa","frontmatter":{"slug":"/series/2018/12/10/node-web-10_logger.html","date":"2018-12-10T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 10.ì»¤ìŠ¤í…€ ëª¨ë“ˆ logger","series":"Node.js ì½”ë“œë©"}},{"id":"e7a83581-aec2-50ad-8f02-844c3d80d72a","frontmatter":{"slug":"/series/2018/12/11/node-web-11_router-use.html","date":"2018-12-11T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 11.ë¼ìš°í„° use","series":"Node.js ì½”ë“œë©"}},{"id":"ab75e9ac-309f-5ac4-b35e-6e5b2f10d60e","frontmatter":{"slug":"/series/2018/12/12/node-web-12_get-posts-api.html","date":"2018-12-12T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 12.í¬ìŠ¤íŠ¸ ì¡°íšŒ API","series":"Node.js ì½”ë“œë©"}},{"id":"cb680042-acc5-5270-80bb-37bcf46274ad","frontmatter":{"slug":"/series/2018/12/13/node-web-13_res.html","date":"2018-12-13T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 13. ì‘ë‹µ ê°ì²´","series":"Node.js ì½”ë“œë©"}},{"id":"4d8231da-f718-5744-905c-d013886497d6","frontmatter":{"slug":"/series/2018/12/14/node-web-14_req.html","date":"2018-12-14T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 14. ìš”ì²­ ê°ì²´","series":"Node.js ì½”ë“œë©"}},{"id":"a122150a-1341-5337-be8f-a12a260e69a2","frontmatter":{"slug":"/series/2018/12/15/node-web-15_get_post.html","date":"2018-12-15T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 15.ë¼ìš°í„° Get, Post","series":"Node.js ì½”ë“œë©"}},{"id":"d83a8980-ace4-529e-adb0-61dc9151e698","frontmatter":{"slug":"/series/2018/12/16/node-web-16_body-parser.html","date":"2018-12-16T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 16. body-parser","series":"Node.js ì½”ë“œë©"}},{"id":"e264676e-7d8a-5ed0-89c8-471d13b53841","frontmatter":{"slug":"/series/2018/12/17/node-web-17_expressjs.html","date":"2018-12-17T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 17. Express.js","series":"Node.js ì½”ë“œë©"}},{"id":"46d0d52a-0c7a-51d0-bf8f-59530a74613e","frontmatter":{"slug":"/series/2018/12/17/node-web-18_summary.html","date":"2018-12-17T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 18. ë§ˆë¬´ë¦¬","series":"Node.js ì½”ë“œë©"}}]}},"pageContext":{"slug":"/series/2018/12/16/node-web-16_body-parser.html","date":"2018-12-16T00:00:00.000Z","series":"Node.js ì½”ë“œë©","videoId":null,"previous":{"frontmatter":{"slug":"/series/2018/12/15/node-web-15_get_post.html","date":"2018-12-15T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 15.ë¼ìš°í„° Get, Post","category":"ì—°ì¬ë¬¼","series":"Node.js ì½”ë“œë©","videoId":null}},"next":{"frontmatter":{"slug":"/series/2018/12/17/node-web-18_summary.html","date":"2018-12-17T00:00:00.000Z","title":"[Node.jsì½”ë“œë©] 18. ë§ˆë¬´ë¦¬","category":"ì—°ì¬ë¬¼","series":"Node.js ì½”ë“œë©","videoId":null}}}},"staticQueryHashes":["2263867198"]}