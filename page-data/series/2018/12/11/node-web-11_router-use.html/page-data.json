{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/series/2018/12/11/node-web-11_router-use.html","result":{"data":{"site":{"siteMetadata":{"title":"ê¹€ì •í™˜ ë¸”ë¡œê·¸","url":"https://jeonghwan-kim.github.io"}},"markdownRemark":{"id":"e2b3798a-86c0-550d-9a37-647495cdd2dd","excerpt":"ğŸŒ³ëª©í‘œ ë¼ìš°í„° ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ ë‹¤ì–‘í•œ ê²½ë¡œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ë¼ìš´íŒ…ì˜ í•œê³„ ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì •ì íŒŒì¼ì„ ì œì™¸í•œ ëª¨ë“  ìš”ì²­ì„ index ë¯¸ë“¤ì›¨ì–´ê°€ ì²˜ë¦¬í•©ë‹ˆë‹¤. \"GET /foo\" ë¡œ ìš”ì²­í•˜ë”ë¼ë„ index ë¯¸ë“¤ì›¨ì–´ê°€ ë™ì‘í•´ì„œ index.html íŒŒì¼ì„ ì œê³µí•˜ëŠ”â€¦","html":"<h2 id=\"ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"ëª©í‘œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸŒ³ëª©í‘œ</h2>\n<p>ë¼ìš°í„° ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ ë‹¤ì–‘í•œ ê²½ë¡œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ê¸°ì¡´-ë¼ìš´íŒ…ì˜-í•œê³„\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%A1%B4-%EB%9D%BC%EC%9A%B4%ED%8C%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"ê¸°ì¡´ ë¼ìš´íŒ…ì˜ í•œê³„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°ì¡´ ë¼ìš´íŒ…ì˜ í•œê³„</h2>\n<p>ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì •ì íŒŒì¼ì„ ì œì™¸í•œ ëª¨ë“  ìš”ì²­ì„ index ë¯¸ë“¤ì›¨ì–´ê°€ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">serveStatic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>error404<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\"GET /foo\" ë¡œ ìš”ì²­í•˜ë”ë¼ë„ index ë¯¸ë“¤ì›¨ì–´ê°€ ë™ì‘í•´ì„œ index.html íŒŒì¼ì„ ì œê³µí•˜ëŠ” ê²ƒì´ì£ . ì•„, ë¬¼ë¡  ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ë‹¤ë¥´ì§€ë§Œìš”.</p>\n<p>ë§Œì•½ ì•„ë˜ì™€ ê°™ì´ ì½”ë”©í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¨ê¹Œìš”?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> indexController<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/foo\"</span><span class=\"token punctuation\">,</span> fooController<span class=\"token punctuation\">)</span></code></pre></div>\n<p>íŠ¹ì • ì£¼ì†Œ(\"/\")ì˜ ìš”ì²­ì´ ìˆì„ ê²½ìš°ë§Œ ì„¤ì •í•œ ë¯¸ë“¤ì›¨ì–´(indexController)ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë¬¼ë¡  \"/foo\" ê²½ë¡œë¡œ ìš”ì²­í•˜ë©´ fooControllerê°€ ë™ì‘ëŠ” ê±°ì§€ìš”.</p>\n<h2 id=\"use-ë©”ì†Œë“œì—-ë¼ìš°í„°-ê¸°ëŠ¥-ì¶”ê°€\" style=\"position:relative;\"><a href=\"#use-%EB%A9%94%EC%86%8C%EB%93%9C%EC%97%90-%EB%9D%BC%EC%9A%B0%ED%84%B0-%EA%B8%B0%EB%8A%A5-%EC%B6%94%EA%B0%80\" aria-label=\"use ë©”ì†Œë“œì— ë¼ìš°í„° ê¸°ëŠ¥ ì¶”ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>use() ë©”ì†Œë“œì— ë¼ìš°í„° ê¸°ëŠ¥ ì¶”ê°€</h2>\n<p>ë¯¸ë“¤ì›¨ì–´ ë“±ë¡ í•¨ìˆ˜ì¸ useë¥¼ ì¡°ê¸ˆ í™•ì¥í•´ ë³´ê² ìŠµë‹ˆë‹¤.\nê²½ë¡œê¹Œì§€ ì¸ìë¡œ ì¶”ê°€í•´ ë³¼ê¹Œìš”?\në¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•  ë•Œ ë“±ë¡í•œ ê²½ë¡œì™€ ì§€ê¸ˆ ë“¤ì–´ì˜¨ ìš”ì²­ ì£¼ì†Œê°€ ì¼ì¹˜í•  ë•Œë§Œ ê·¸ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>\n<h2 id=\"ì‹¤ìŠµ---ë¼ìš°í„°-ê¸°ëŠ¥-êµ¬í˜„\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5---%EB%9D%BC%EC%9A%B0%ED%84%B0-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"ì‹¤ìŠµ   ë¼ìš°í„° ê¸°ëŠ¥ êµ¬í˜„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤ì‹¤ìŠµ - ë¼ìš°í„° ê¸°ëŠ¥ êµ¬í˜„</h2>\n<p>ë¨¼ì € ì§€ë‚œ ì‹œê°„ê¹Œì§€ ì‘ì„±í•œ ì½”ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ git checkout -f module/logger-color</code></pre></div>\n<p>app.use(path, fn)ìœ¼ë¡œ ë©”ì†Œë“œë¥¼ í™•ì¥í•´ ë³´ì„¸ìš”.</p>\n<p><em>íŒíŠ¸: fn.\\</em>pathì— pathë¥¼ ì €ì¥_</p>\n<h2 id=\"-í’€ì´\" style=\"position:relative;\"><a href=\"#-%ED%92%80%EC%9D%B4\" aria-label=\" í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤ í’€ì´</h2>\n<p>ê°™ì´ í’€ì´ ë³´ì£ . use() ë©”ì†Œë“œê°€ ì •ì˜ëœ src/Application.js íŒŒì¼ì„ ë¨¼ì € ìˆ˜ì •í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">use</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">path<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> path <span class=\"token operator\">===</span> <span class=\"token string\">\"string\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> fn <span class=\"token operator\">===</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fn<span class=\"token punctuation\">.</span>_path <span class=\"token operator\">=</span> path\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> path <span class=\"token operator\">==</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fn <span class=\"token operator\">=</span> path\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Usage: use(path, fn) or use(fn)\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  _middleware<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>path ì¸ìëŠ” ì„ íƒì‚¬í•­ì´ê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ì„ ìœ ì—°í•˜ê²Œ ì²˜ë¦¬í•´ ì£¼ì–´ì•¼ í•˜ëŠ”ë° if/else êµ¬ë¬¸ì´ ê·¸ ì½”ë“œì…ë‹ˆë‹¤.</p>\n<p>ì¤‘ìš”í•œ ê²ƒì€ ë‘ë²ˆì§¸ ë¯¸ë“¤ì›¨ì–´ ì¸ì fnì˜ _path ì†ì„±ì— ê²½ë¡œë¥¼ ì €ì¥í•œ ë¶€ë¶„ì…ë‹ˆë‹¤.\nì´ í›„ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•  ë•Œ ì´ ë¬¸ìì—´ê³¼ ìš”ì²­URLë¥¼ ë¹„êµí•œ ë’¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ê²ƒì´ ê±°ë“ ìš”.\nì°¸ê³ ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ëŠ” ì´ë ‡ê²Œ ê°ì²´ í˜•ì‹ìœ¼ë¡œ í”„ëŸ¬í¼í‹°ë¥¼ ì¶”ê°€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ì œ run() ë©”ì†Œë“œê°€ ì •ì˜ëœ src/Middleware.js íŒŒì¼ë¡œ ì´ë™í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">_run</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span> err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextMw<span class=\"token punctuation\">.</span>_path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ê²½ë¡œë¥¼ ë¹„êµí•œë‹¤</span>\n    <span class=\"token keyword\">const</span> pathMatched <span class=\"token operator\">=</span> _req<span class=\"token punctuation\">.</span>url <span class=\"token operator\">===</span> nextMw<span class=\"token punctuation\">.</span>_path\n    <span class=\"token keyword\">return</span> pathMatched <span class=\"token operator\">?</span> <span class=\"token function\">nextMw</span><span class=\"token punctuation\">(</span>_req<span class=\"token punctuation\">,</span> _res<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">_run</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">nextMw</span><span class=\"token punctuation\">(</span>_req<span class=\"token punctuation\">,</span> _res<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>use() ë©”ì†Œë“œì—ì„œ ì €ì¥í•œ ê²½ë¡œì •ë³´ëŠ” nextMw._pathë¥¼ í†µí•´ ì ‘ê·¼í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì‹¤ì œ ìš”ì²­ URL(_req.url)ê³¼ ë¹„êµí•´ì„œ ê²½ë¡œê°€ ê°™ìœ¼ë©´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\nê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì°¾ëŠ” ë°©ì‹ì´ì£ . (_run(i + 1))</p>\n<h2 id=\"ë¼ìš°í„°-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#%EB%9D%BC%EC%9A%B0%ED%84%B0-%EC%82%AC%EC%9A%A9\" aria-label=\"ë¼ìš°í„° ì‚¬ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¼ìš°í„° ì‚¬ìš©</h2>\n<p>app.jsì— ìˆëŠ” index ë¯¸ë“¤ì›¨ì–´ì™€ error ë¯¸ë“¤ì›¨ì–´ë¥¼ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì € routers/index.js íŒŒì¼ì— index ë¯¸ë“¤ì›¨ì–´ë¥¼ ì˜®ê¹ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">listPosts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> publicPath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../public\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  listPosts<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>í¬ìŠ¤íŠ¸ ëª©ë¡ì„ ë³´ì—¬ì¤€ë‹¤ëŠ” ì˜ë¯¸ì—ì„œ listPosts ë¼ëŠ” ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ëª¨ë“ˆë¡œ ë…¸ì¶œí•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p>middlewares/errors.jsì— error404, error ë¯¸ë“¤ì›¨ì–´ë„ ì˜®ê¸°ê²¨ ë³´ì§€ìš”.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">error404</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">error</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  error404<span class=\"token punctuation\">,</span>\n  error<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ app.js ê°€ ì–¼ë§ˆë‚˜ ë‹¨ìˆœí•˜ê²Œ ê°œì„ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> serveStatic <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./middlewares/serve-static\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./middlewares/logger\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> errors <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./middlewares/errors\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./routes/index\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> App <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/Application\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">serveStatic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">.</span><span class=\"token function\">listPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>errors<span class=\"token punctuation\">.</span><span class=\"token function\">error404</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>errors<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> app</code></pre></div>\n<p>Application ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³  ì—¬ê¸°ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ì¶”ê°€í•˜ëŠ” ì½”ë“œë§Œ ë“¤ì–´ ìˆì£ .\nì´ê²ƒë§Œ ë³´ë”ë¼ë„ ì„œë²„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–¤ ë™ì‘ì„ í•˜ëŠ”ì§€ ê°€ëŠ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<p>ë¿ë§Œì•„ë‹ˆë¼ ê¸°ëŠ¥ë„ ë¯¸ì„¸í•˜ê²Œ ë‹¬ë¼ ì§‘ë‹ˆë‹¤. ì´ì   ì œëŒ€ë¡œ 404 ì‘ë‹µì„ í•  ìˆ˜ ìˆì£ .</p>\n<p>ë§Œì•½ ì •ì˜ ë˜ì§€ ì•Šì€ ê²½ë¡œ, ê°€ë ¹ \"/foo\"ë¡œ ìš”ì²­ì„ í•œë‹¤ê³  í•©ì‹œë‹¤.\nì„œë²„ì—ì„œëŠ” logger -> serveStatic ë¯¸ë“¤ì›¨ì–´ê¹Œì§€ ê°€ë‹¤ê°€ index.listPostëŠ” ê±´ë„ˆ ë›°ì–´ ë²„ë¦¬ê² ì£ . ê²½ë¡œê°€ ë§ì§€ ì•Šìœ¼ë‹ˆê¹ìš”. erros.error404 ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë‚˜ê²Œ ë˜ê³  ë¹„ë¡œ Not Found ë¬¸ìì—´ì„ ì‘ë‹µí•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.</p>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h2>\n<ul>\n<li>ê²½ë¡œì— ë”°ë¼ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì„¤ì •í•˜ëŠ” use() ë©”ì†Œë“œë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.</li>\n<li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ê²Œ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤.</li>\n</ul>\n<p><a href=\"/series/2018/12/01/node-web-0_index.html\">ëª©ì°¨ ë°”ë¡œê°€ê¸°</a></p>","fields":{"dateStr":"2018ë…„ 12ì›” 11ì¼","date":"2018-12-11T00:00:00.000Z","slug":"/series/2018/12/11/node-web-11_router-use.html"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 11.ë¼ìš°í„° use","tags":["lecture"],"seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab","videoId":null,"featured_image":null,"featuredImage":null},"tableOfContents":"<ul>\n<li><a href=\"#%EB%AA%A9%ED%91%9C\">ğŸŒ³ëª©í‘œ</a></li>\n<li><a href=\"#%EA%B8%B0%EC%A1%B4-%EB%9D%BC%EC%9A%B4%ED%8C%85%EC%9D%98-%ED%95%9C%EA%B3%84\">ê¸°ì¡´ ë¼ìš´íŒ…ì˜ í•œê³„</a></li>\n<li><a href=\"#use-%EB%A9%94%EC%86%8C%EB%93%9C%EC%97%90-%EB%9D%BC%EC%9A%B0%ED%84%B0-%EA%B8%B0%EB%8A%A5-%EC%B6%94%EA%B0%80\">use() ë©”ì†Œë“œì— ë¼ìš°í„° ê¸°ëŠ¥ ì¶”ê°€</a></li>\n<li><a href=\"#%EC%8B%A4%EC%8A%B5---%EB%9D%BC%EC%9A%B0%ED%84%B0-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\">ğŸ¤ì‹¤ìŠµ - ë¼ìš°í„° ê¸°ëŠ¥ êµ¬í˜„</a></li>\n<li><a href=\"#-%ED%92%80%EC%9D%B4\">ğŸ¤ í’€ì´</a></li>\n<li><a href=\"#%EB%9D%BC%EC%9A%B0%ED%84%B0-%EC%82%AC%EC%9A%A9\">ë¼ìš°í„° ì‚¬ìš©</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">ì •ë¦¬</a></li>\n</ul>"},"series":{"id":"555b6438-4a71-51d0-9156-a1d5ca4d5eab","title":"Node.js ì½”ë“œë©"},"video":null,"allMarkdownRemark":{"nodes":[{"id":"bfbe2949-f7c2-5861-9d73-2145263850e4","fields":{"slug":"/series/2018/12/01/node-web-1_orientation.html","date":"2018-12-01T00:00:00.000Z"},"frontmatter":{"title":"[Node.js ì½”ë“œë©] 1.ì˜¤ë¦¬ì—”í…Œì´ì…˜","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"6b4ab14d-846e-5796-9799-c42848621979","fields":{"slug":"/series/2018/12/02/node-web-2_http.html","date":"2018-12-02T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 2.ê¸°ë³¸ ëª¨ë“ˆ http","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"b1aec7ac-3401-50bb-9b3a-1f3c0dba816d","fields":{"slug":"/series/2018/12/03/node-web-3_refactoring.html","date":"2018-12-03T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 3.ë¦¬íŒ©í† ë§","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"f913d343-bfee-554b-a190-0fafe4a15e8f","fields":{"slug":"/series/2018/12/04/node-web-4_application.html","date":"2018-12-04T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 4.ì–´í”Œë¦¬ì¼€ì´ì…˜","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"396ff93e-7740-5750-99a0-ffc8f44b2264","fields":{"slug":"/series/2018/12/05/node-web-5_debug.html","date":"2018-12-05T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 5.ì»¤ìŠ¤í…€ ëª¨ë“ˆ Debug","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"6d2c51d4-140e-578b-ae28-edd6344f42df","fields":{"slug":"/series/2018/12/06/node-web-6_static-files.html","date":"2018-12-06T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 6.ì •ì  íŒŒì¼","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"18013d48-931e-5f5f-97bb-5aa784075b6f","fields":{"slug":"/series/2018/12/07/node-web-7_serve-static.html","date":"2018-12-07T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 7.ì»¤ìŠ¤í…€ ëª¨ë“ˆ serve-static","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"3932b2c9-7cfb-53c5-8357-5f7a790ae295","fields":{"slug":"/series/2018/12/08/node-web-8_middleware.html","date":"2018-12-08T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 8.ë¯¸ë“¤ì›¨ì–´","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"33c47777-8e9e-5a68-85f9-66c1af1ca735","fields":{"slug":"/series/2018/12/09/node-web-9_middleware2.html","date":"2018-12-09T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 9.ë¯¸ë“¤ì›¨ì–´ í™œìš©","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"7c15a535-3372-5d73-808d-aa2ea5af15ae","fields":{"slug":"/series/2018/12/10/node-web-10_logger.html","date":"2018-12-10T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 10.ì»¤ìŠ¤í…€ ëª¨ë“ˆ logger","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"e2b3798a-86c0-550d-9a37-647495cdd2dd","fields":{"slug":"/series/2018/12/11/node-web-11_router-use.html","date":"2018-12-11T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 11.ë¼ìš°í„° use","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"24b0b3cf-a4ba-5f7b-a5a9-d3366bf6721b","fields":{"slug":"/series/2018/12/12/node-web-12_get-posts-api.html","date":"2018-12-12T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 12.í¬ìŠ¤íŠ¸ ì¡°íšŒ API","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"adfb350e-c1d2-5c85-ac6f-d07936575db2","fields":{"slug":"/series/2018/12/13/node-web-13_res.html","date":"2018-12-13T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 13. ì‘ë‹µ ê°ì²´","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"ef8af36e-4bde-584b-b29b-20046d4aa669","fields":{"slug":"/series/2018/12/14/node-web-14_req.html","date":"2018-12-14T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 14. ìš”ì²­ ê°ì²´","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"fbdbd5e4-2a16-5369-a455-6523a1d9b433","fields":{"slug":"/series/2018/12/15/node-web-15_get_post.html","date":"2018-12-15T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 15.ë¼ìš°í„° Get, Post","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"2b2e4511-3367-52ea-9524-9d420ab686c1","fields":{"slug":"/series/2018/12/16/node-web-16_body-parser.html","date":"2018-12-16T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 16. body-parser","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"de643e18-6338-5d9f-908c-48a6d5624cba","fields":{"slug":"/series/2018/12/17/node-web-17_expressjs.html","date":"2018-12-17T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 17. Express.js","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}},{"id":"d47788ec-de07-5a9a-a09b-ba1ebfd67418","fields":{"slug":"/series/2018/12/17/node-web-18_summary.html","date":"2018-12-17T00:00:00.000Z"},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 18. ë§ˆë¬´ë¦¬","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab"}}]}},"pageContext":{"slug":"/series/2018/12/11/node-web-11_router-use.html","date":"2018-12-11T00:00:00.000Z","seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab","videoId":null,"previous":{"fields":{"slug":"/series/2018/12/10/node-web-10_logger.html","date":"2018-12-10T00:00:00.000Z","beforeGatsby":true},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 10.ì»¤ìŠ¤í…€ ëª¨ë“ˆ logger","category":"series","permalink":null,"seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab","videoId":null}},"next":{"fields":{"slug":"/series/2018/12/12/node-web-12_get-posts-api.html","date":"2018-12-12T00:00:00.000Z","beforeGatsby":true},"frontmatter":{"title":"[Node.jsì½”ë“œë©] 12.í¬ìŠ¤íŠ¸ ì¡°íšŒ API","category":"series","permalink":null,"seriesId":"555b6438-4a71-51d0-9156-a1d5ca4d5eab","videoId":null}}}},"staticQueryHashes":[]}